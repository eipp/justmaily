"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[517],{517:(e,t,i)=>{i.d(t,{eI:()=>eb});var n,s,r,o,a,h,c,l,u,d,f=i(249),p=i(13);let v={"X-Client-Info":"realtime-js/2.11.2"};!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(n||(n={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(s||(s={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(r||(r={})),(o||(o={})).websocket="websocket",function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(a||(a={}));class g{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):"string"==typeof e?t(JSON.parse(e)):t({})}_binaryDecode(e){let t=new DataView(e),i=new TextDecoder;return this._decodeBroadcast(e,t,i)}_decodeBroadcast(e,t,i){let n=t.getUint8(1),s=t.getUint8(2),r=this.HEADER_LENGTH+2,o=i.decode(e.slice(r,r+n));r+=n;let a=i.decode(e.slice(r,r+s));return r+=s,{ref:null,topic:o,event:a,payload:JSON.parse(i.decode(e.slice(r,e.byteLength)))}}}class m{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(h||(h={}));let b=(e,t,i={})=>{var n;let s=null!==(n=i.skipTypes)&&void 0!==n?n:[];return Object.keys(t).reduce((i,n)=>(i[n]=y(n,e,t,s),i),{})},y=(e,t,i,n)=>{let s=t.find(t=>t.name===e),r=null==s?void 0:s.type,o=i[e];return r&&!n.includes(r)?_(r,o):k(o)},_=(e,t)=>{if("_"===e.charAt(0))return E(t,e.slice(1,e.length));switch(e){case h.bool:return w(t);case h.float4:case h.float8:case h.int2:case h.int4:case h.int8:case h.numeric:case h.oid:return j(t);case h.json:case h.jsonb:return T(t);case h.timestamp:return O(t);case h.abstime:case h.date:case h.daterange:case h.int4range:case h.int8range:case h.money:case h.reltime:case h.text:case h.time:case h.timestamptz:case h.timetz:case h.tsrange:case h.tstzrange:default:return k(t)}},k=e=>e,w=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},j=e=>{if("string"==typeof e){let t=parseFloat(e);if(!Number.isNaN(t))return t}return e},T=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(e){console.log(`JSON parse error: ${e}`)}return e},E=(e,t)=>{if("string"!=typeof e)return e;let i=e.length-1,n=e[i];if("{"===e[0]&&"}"===n){let n;let s=e.slice(1,i);try{n=JSON.parse("["+s+"]")}catch(e){n=s?s.split(","):[]}return n.map(e=>_(t,e))}return e},O=e=>"string"==typeof e?e.replace(" ","T"):e,C=e=>{let t=e;return(t=(t=t.replace(/^ws/i,"http")).replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,"")).replace(/\/+$/,"")};class R{constructor(e,t,i={},n=1e4){this.channel=e,this.event=t,this.payload=i,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var i;return this._hasReceived(e)&&t(null===(i=this.receivedResp)||void 0===i?void 0:i.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref),this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout))}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(c||(c={}));class ${constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let i=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},e=>{let{onJoin:t,onLeave:i,onSync:n}=this.caller;this.joinRef=this.channel._joinRef(),this.state=$.syncState(this.state,e,t,i),this.pendingDiffs.forEach(e=>{this.state=$.syncDiff(this.state,e,t,i)}),this.pendingDiffs=[],n()}),this.channel._on(i.diff,{},e=>{let{onJoin:t,onLeave:i,onSync:n}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=$.syncDiff(this.state,e,t,i),n())}),this.onJoin((e,t,i)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:i})}),this.onLeave((e,t,i)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,i,n){let s=this.cloneDeep(e),r=this.transformState(t),o={},a={};return this.map(s,(e,t)=>{r[e]||(a[e]=t)}),this.map(r,(e,t)=>{let i=s[e];if(i){let n=t.map(e=>e.presence_ref),s=i.map(e=>e.presence_ref),r=t.filter(e=>0>s.indexOf(e.presence_ref)),h=i.filter(e=>0>n.indexOf(e.presence_ref));r.length>0&&(o[e]=r),h.length>0&&(a[e]=h)}else o[e]=t}),this.syncDiff(s,{joins:o,leaves:a},i,n)}static syncDiff(e,t,i,n){let{joins:s,leaves:r}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return i||(i=()=>{}),n||(n=()=>{}),this.map(s,(t,n)=>{var s;let r=null!==(s=e[t])&&void 0!==s?s:[];if(e[t]=this.cloneDeep(n),r.length>0){let i=e[t].map(e=>e.presence_ref),n=r.filter(e=>0>i.indexOf(e.presence_ref));e[t].unshift(...n)}i(t,r,n)}),this.map(r,(t,i)=>{let s=e[t];if(!s)return;let r=i.map(e=>e.presence_ref);s=s.filter(e=>0>r.indexOf(e.presence_ref)),e[t]=s,n(t,s,i),0===s.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(i=>t(i,e[i]))}static transformState(e){return Object.getOwnPropertyNames(e=this.cloneDeep(e)).reduce((t,i)=>{let n=e[i];return"metas"in n?t[i]=n.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):t[i]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(l||(l={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(u||(u={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(d||(d={}));class S{constructor(e,t={config:{}},i){this.topic=e,this.params=t,this.socket=i,this.bindings={},this.state=s.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new R(this,r.join,this.params,this.timeout),this.rejoinTimer=new m(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=s.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=s.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=s.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=s.errored,this.rejoinTimer.scheduleTimeout())}),this._on(r.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new $(this),this.broadcastEndpointURL=C(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var i,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{let{config:{broadcast:s,presence:r,private:o}}=this.params;this._onError(t=>null==e?void 0:e(d.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(d.CLOSED));let a={},h={broadcast:s,presence:r,postgres_changes:null!==(n=null===(i=this.bindings.postgres_changes)||void 0===i?void 0:i.map(e=>e.filter))&&void 0!==n?n:[],private:o};this.socket.accessTokenValue&&(a.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:h},a)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var i;if(this.socket.setAuth(),void 0===t){null==e||e(d.SUBSCRIBED);return}{let n=this.bindings.postgres_changes,s=null!==(i=null==n?void 0:n.length)&&void 0!==i?i:0,r=[];for(let i=0;i<s;i++){let s=n[i],{filter:{event:o,schema:a,table:h,filter:c}}=s,l=t&&t[i];if(l&&l.event===o&&l.schema===a&&l.table===h&&l.filter===c)r.push(Object.assign(Object.assign({},s),{id:l.id}));else{this.unsubscribe(),null==e||e(d.CHANNEL_ERROR,Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=r,e&&e(d.SUBSCRIBED);return}}).receive("error",t=>{null==e||e(d.CHANNEL_ERROR,Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(d.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,i){return this._on(e,t,i)}async send(e,t={}){var i,n;if(this._canPush()||"broadcast"!==e.type)return new Promise(i=>{var n,s,r;let o=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(r=null===(s=null===(n=this.params)||void 0===n?void 0:n.config)||void 0===s?void 0:s.broadcast)||void 0===r?void 0:r.ack)||i("ok"),o.receive("ok",()=>i("ok")),o.receive("error",()=>i("error")),o.receive("timeout",()=>i("timed out"))});{let{event:s,payload:r}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:r,private:this.private}]})};try{let e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(i=t.timeout)&&void 0!==i?i:this.timeout);return await (null===(n=e.body)||void 0===n?void 0:n.cancel()),e.ok?"ok":"error"}catch(e){if("AbortError"===e.name)return"timed out";return"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=s.leaving;let t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(r.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(i=>{let n=new R(this,r.leave,{},e);n.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}async _fetchWithTimeout(e,t,i){let n=new AbortController,s=setTimeout(()=>n.abort(),i),r=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(s),r}_push(e,t,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new R(this,e,t,i);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,i){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,i){var n,s;let o=e.toLocaleLowerCase(),{close:a,error:h,leave:c,join:l}=r;if(i&&[a,h,c,l].indexOf(o)>=0&&i!==this._joinRef())return;let u=this._onMessage(o,t,i);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?null===(n=this.bindings.postgres_changes)||void 0===n||n.filter(e=>{var t,i,n;return(null===(t=e.filter)||void 0===t?void 0:t.event)==="*"||(null===(n=null===(i=e.filter)||void 0===i?void 0:i.event)||void 0===n?void 0:n.toLocaleLowerCase())===o}).map(e=>e.callback(u,i)):null===(s=this.bindings[o])||void 0===s||s.filter(e=>{var i,n,s,r,a,h;if(!["broadcast","presence","postgres_changes"].includes(o))return e.type.toLocaleLowerCase()===o;if("id"in e){let r=e.id,o=null===(i=e.filter)||void 0===i?void 0:i.event;return r&&(null===(n=t.ids)||void 0===n?void 0:n.includes(r))&&("*"===o||(null==o?void 0:o.toLocaleLowerCase())===(null===(s=t.data)||void 0===s?void 0:s.type.toLocaleLowerCase()))}{let i=null===(a=null===(r=null==e?void 0:e.filter)||void 0===r?void 0:r.event)||void 0===a?void 0:a.toLocaleLowerCase();return"*"===i||i===(null===(h=null==t?void 0:t.event)||void 0===h?void 0:h.toLocaleLowerCase())}}).map(e=>{if("object"==typeof u&&"ids"in u){let e=u.data,{schema:t,table:i,commit_timestamp:n,type:s,errors:r}=e;u=Object.assign(Object.assign({},{schema:t,table:i,commit_timestamp:n,eventType:s,new:{},old:{},errors:r}),this._getPayloadRecords(e))}e.callback(u,i)})}_isClosed(){return this.state===s.closed}_isJoined(){return this.state===s.joined}_isJoining(){return this.state===s.joining}_isLeaving(){return this.state===s.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,i){let n=e.toLocaleLowerCase(),s={type:n,filter:t,callback:i};return this.bindings[n]?this.bindings[n].push(s):this.bindings[n]=[s],this}_off(e,t){let i=e.toLocaleLowerCase();return this.bindings[i]=this.bindings[i].filter(e=>{var n;return!((null===(n=e.type)||void 0===n?void 0:n.toLocaleLowerCase())===i&&S.isEqual(e.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let i in e)if(e[i]!==t[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(r.close,{},e)}_onError(e){this._on(r.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=s.joining,this.joinPush.resend(e))}_getPayloadRecords(e){let t={new:{},old:{}};return("INSERT"===e.type||"UPDATE"===e.type)&&(t.new=b(e.columns,e.record)),("UPDATE"===e.type||"DELETE"===e.type)&&(t.old=b(e.columns,e.old_record)),t}}let P=()=>{},U="undefined"!=typeof WebSocket,L=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class x{constructor(e,t){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=v,this.params={},this.timeout=1e4,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=P,this.conn=null,this.sendBuffer=[],this.serializer=new g,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=e=>{let t;return e?t=e:"undefined"==typeof fetch?t=(...e)=>Promise.resolve().then(i.bind(i,460)).then(({default:t})=>t(...e)):t=fetch,(...e)=>t(...e)},this.endPoint=`${e}/${o.websocket}`,this.httpEndpoint=C(e),(null==t?void 0:t.transport)?this.transport=t.transport:this.transport=null,(null==t?void 0:t.params)&&(this.params=t.params),(null==t?void 0:t.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),(null==t?void 0:t.timeout)&&(this.timeout=t.timeout),(null==t?void 0:t.logger)&&(this.logger=t.logger),(null==t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);let s=null===(n=null==t?void 0:t.params)||void 0===n?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=(null==t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null==t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null==t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new m(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(null==t?void 0:t.fetch),null==t?void 0:t.worker){if("undefined"!=typeof window&&!window.Worker)throw Error("Web Worker is not supported");this.worker=(null==t?void 0:t.worker)||!1,this.workerUrl=null==t?void 0:t.workerUrl}this.accessToken=(null==t?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(U){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new A(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Promise.resolve().then(i.t.bind(i,182,23)).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){let t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){let e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.disconnect(),e}log(e,t,i){this.logger(e,t,i)}connectionState(){switch(this.conn&&this.conn.readyState){case n.connecting:return a.Connecting;case n.open:return a.Open;case n.closing:return a.Closing;default:return a.Closed}}isConnected(){return this.connectionState()===a.Open}channel(e,t={config:{}}){let i=new S(`realtime:${e}`,t,this);return this.channels.push(i),i}push(e){let{topic:t,event:i,payload:n,ref:s}=e,r=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${i} (${s})`,n),this.isConnected()?r():this.sendBuffer.push(r)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let e=null;try{e=JSON.parse(atob(t.split(".")[1]))}catch(e){}if(e&&e.exp&&!(Math.floor(Date.now()/1e3)-e.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${e.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${e.exp}`);this.accessTokenValue=t,this.channels.forEach(e=>{t&&e.updateJoinPayload({access_token:t}),e.joinedOnce&&e._isJoined()&&e._push(r.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,e=>{let{topic:t,event:i,payload:n,ref:s}=e;s&&s===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${n.status||""} ${t} ${i} ${s&&"("+s+")"||""}`,n),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(i,n,s)),this.stateChangeCallbacks.message.forEach(t=>t(e))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}else this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(r.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;let i=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${i}${n}`}_workerObjectUrl(e){let t;if(e)t=e;else{let e=new Blob([L],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}}class A{constructor(e,t,i){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=n.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=i.close}}class N extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function D(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class I extends N{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class B extends N{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}let J=e=>{let t;return e?t=e:"undefined"==typeof fetch?t=(...e)=>Promise.resolve().then(i.bind(i,460)).then(({default:t})=>t(...e)):t=fetch,(...e)=>t(...e)},M=()=>(function(e,t,i,n){return new(i||(i=Promise))(function(s,r){function o(e){try{h(n.next(e))}catch(e){r(e)}}function a(e){try{h(n.throw(e))}catch(e){r(e)}}function h(e){var t;e.done?s(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(o,a)}h((n=n.apply(e,t||[])).next())})})(void 0,void 0,void 0,function*(){return"undefined"==typeof Response?(yield Promise.resolve().then(i.bind(i,460))).Response:Response}),H=e=>{if(Array.isArray(e))return e.map(e=>H(e));if("function"==typeof e||e!==Object(e))return e;let t={};return Object.entries(e).forEach(([e,i])=>{t[e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""))]=H(i)}),t};var z=function(e,t,i,n){return new(i||(i=Promise))(function(s,r){function o(e){try{h(n.next(e))}catch(e){r(e)}}function a(e){try{h(n.throw(e))}catch(e){r(e)}}function h(e){var t;e.done?s(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(o,a)}h((n=n.apply(e,t||[])).next())})};let F=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),K=(e,t,i)=>z(void 0,void 0,void 0,function*(){e instanceof(yield M())&&!(null==i?void 0:i.noResolveJson)?e.json().then(i=>{t(new I(F(i),e.status||500))}).catch(e=>{t(new B(F(e),e))}):t(new B(F(e),e))}),W=(e,t,i,n)=>{let s={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?s:(s.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),i))};function V(e,t,i,n,s,r){return z(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(i,W(t,n,s,r)).then(e=>{if(!e.ok)throw e;return(null==n?void 0:n.noResolveJson)?e:e.json()}).then(e=>o(e)).catch(e=>K(e,a,n))})})}function G(e,t,i,n){return z(this,void 0,void 0,function*(){return V(e,"GET",t,i,n)})}function q(e,t,i,n,s){return z(this,void 0,void 0,function*(){return V(e,"POST",t,n,s,i)})}function Q(e,t,i,n,s){return z(this,void 0,void 0,function*(){return V(e,"DELETE",t,n,s,i)})}var X=i(195).Buffer,Y=function(e,t,i,n){return new(i||(i=Promise))(function(s,r){function o(e){try{h(n.next(e))}catch(e){r(e)}}function a(e){try{h(n.throw(e))}catch(e){r(e)}}function h(e){var t;e.done?s(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(o,a)}h((n=n.apply(e,t||[])).next())})};let Z={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ee={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class et{constructor(e,t={},i,n){this.url=e,this.headers=t,this.bucketId=i,this.fetch=J(n)}uploadOrUpdate(e,t,i,n){return Y(this,void 0,void 0,function*(){try{let s;let r=Object.assign(Object.assign({},ee),n),o=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(r.upsert)}),a=r.metadata;"undefined"!=typeof Blob&&i instanceof Blob?((s=new FormData).append("cacheControl",r.cacheControl),a&&s.append("metadata",this.encodeMetadata(a)),s.append("",i)):"undefined"!=typeof FormData&&i instanceof FormData?((s=i).append("cacheControl",r.cacheControl),a&&s.append("metadata",this.encodeMetadata(a))):(s=i,o["cache-control"]=`max-age=${r.cacheControl}`,o["content-type"]=r.contentType,a&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(a)))),(null==n?void 0:n.headers)&&(o=Object.assign(Object.assign({},o),n.headers));let h=this._removeEmptyFolders(t),c=this._getFinalPath(h),l=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:s,headers:o},(null==r?void 0:r.duplex)?{duplex:r.duplex}:{})),u=yield l.json();if(l.ok)return{data:{path:h,id:u.Id,fullPath:u.Key},error:null};return{data:null,error:u}}catch(e){if(D(e))return{data:null,error:e};throw e}})}upload(e,t,i){return Y(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,i)})}uploadToSignedUrl(e,t,i,n){return Y(this,void 0,void 0,function*(){let s=this._removeEmptyFolders(e),r=this._getFinalPath(s),o=new URL(this.url+`/object/upload/sign/${r}`);o.searchParams.set("token",t);try{let e;let t=Object.assign({upsert:ee.upsert},n),r=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&i instanceof Blob?((e=new FormData).append("cacheControl",t.cacheControl),e.append("",i)):"undefined"!=typeof FormData&&i instanceof FormData?(e=i).append("cacheControl",t.cacheControl):(e=i,r["cache-control"]=`max-age=${t.cacheControl}`,r["content-type"]=t.contentType);let a=yield this.fetch(o.toString(),{method:"PUT",body:e,headers:r}),h=yield a.json();if(a.ok)return{data:{path:s,fullPath:h.Key},error:null};return{data:null,error:h}}catch(e){if(D(e))return{data:null,error:e};throw e}})}createSignedUploadUrl(e,t){return Y(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),n=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(n["x-upsert"]="true");let s=yield q(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:n}),r=new URL(this.url+s.url),o=r.searchParams.get("token");if(!o)throw new N("No token returned by API");return{data:{signedUrl:r.toString(),path:e,token:o},error:null}}catch(e){if(D(e))return{data:null,error:e};throw e}})}update(e,t,i){return Y(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,i)})}move(e,t,i){return Y(this,void 0,void 0,function*(){try{return{data:yield q(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==i?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(e){if(D(e))return{data:null,error:e};throw e}})}copy(e,t,i){return Y(this,void 0,void 0,function*(){try{return{data:{path:(yield q(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==i?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(e){if(D(e))return{data:null,error:e};throw e}})}createSignedUrl(e,t,i){return Y(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),s=yield q(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},(null==i?void 0:i.transform)?{transform:i.transform}:{}),{headers:this.headers}),r=(null==i?void 0:i.download)?`&download=${!0===i.download?"":i.download}`:"";return{data:s={signedUrl:encodeURI(`${this.url}${s.signedURL}${r}`)},error:null}}catch(e){if(D(e))return{data:null,error:e};throw e}})}createSignedUrls(e,t,i){return Y(this,void 0,void 0,function*(){try{let n=yield q(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=(null==i?void 0:i.download)?`&download=${!0===i.download?"":i.download}`:"";return{data:n.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${s}`):null})),error:null}}catch(e){if(D(e))return{data:null,error:e};throw e}})}download(e,t){return Y(this,void 0,void 0,function*(){let i=void 0!==(null==t?void 0:t.transform),n=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),s=n?`?${n}`:"";try{let t=this._getFinalPath(e),n=yield G(this.fetch,`${this.url}/${i?"render/image/authenticated":"object"}/${t}${s}`,{headers:this.headers,noResolveJson:!0});return{data:yield n.blob(),error:null}}catch(e){if(D(e))return{data:null,error:e};throw e}})}info(e){return Y(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{let e=yield G(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:H(e),error:null}}catch(e){if(D(e))return{data:null,error:e};throw e}})}exists(e){return Y(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{return yield function(e,t,i,n){return z(this,void 0,void 0,function*(){return V(e,"HEAD",t,Object.assign(Object.assign({},i),{noResolveJson:!0}),void 0)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(e){if(D(e)&&e instanceof B){let t=e.originalError;if([400,404].includes(null==t?void 0:t.status))return{data:!1,error:e}}throw e}})}getPublicUrl(e,t){let i=this._getFinalPath(e),n=[],s=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==s&&n.push(s);let r=void 0!==(null==t?void 0:t.transform),o=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==o&&n.push(o);let a=n.join("&");return""!==a&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${r?"render/image":"object"}/public/${i}${a}`)}}}remove(e){return Y(this,void 0,void 0,function*(){try{return{data:yield Q(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(e){if(D(e))return{data:null,error:e};throw e}})}list(e,t,i){return Y(this,void 0,void 0,function*(){try{let n=Object.assign(Object.assign(Object.assign({},Z),t),{prefix:e||""});return{data:yield q(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},i),error:null}}catch(e){if(D(e))return{data:null,error:e};throw e}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return void 0!==X?X.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}let ei={"X-Client-Info":"storage-js/2.7.1"};var en=function(e,t,i,n){return new(i||(i=Promise))(function(s,r){function o(e){try{h(n.next(e))}catch(e){r(e)}}function a(e){try{h(n.throw(e))}catch(e){r(e)}}function h(e){var t;e.done?s(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(o,a)}h((n=n.apply(e,t||[])).next())})};class es{constructor(e,t={},i){this.url=e,this.headers=Object.assign(Object.assign({},ei),t),this.fetch=J(i)}listBuckets(){return en(this,void 0,void 0,function*(){try{return{data:yield G(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(D(e))return{data:null,error:e};throw e}})}getBucket(e){return en(this,void 0,void 0,function*(){try{return{data:yield G(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(e){if(D(e))return{data:null,error:e};throw e}})}createBucket(e,t={public:!1}){return en(this,void 0,void 0,function*(){try{return{data:yield q(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(D(e))return{data:null,error:e};throw e}})}updateBucket(e,t){return en(this,void 0,void 0,function*(){try{return{data:yield function(e,t,i,n,s){return z(this,void 0,void 0,function*(){return V(e,"PUT",t,n,void 0,i)})}(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(D(e))return{data:null,error:e};throw e}})}emptyBucket(e){return en(this,void 0,void 0,function*(){try{return{data:yield q(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(D(e))return{data:null,error:e};throw e}})}deleteBucket(e){return en(this,void 0,void 0,function*(){try{return{data:yield Q(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){if(D(e))return{data:null,error:e};throw e}})}}class er extends es{constructor(e,t={},i){super(e,t,i)}from(e){return new et(this.url,this.headers,e,this.fetch)}}let eo="";"undefined"!=typeof Deno?eo="deno":"undefined"!=typeof document?eo="web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?eo="react-native":eo="node";let ea={headers:{"X-Client-Info":`supabase-js-${eo}/2.48.1`}},eh={schema:"public"},ec={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},el={};var eu=i(460);let ed=e=>{let t;return e?t=e:"undefined"==typeof fetch?t=eu.default:t=fetch,(...e)=>t(...e)},ef=()=>"undefined"==typeof Headers?eu.Headers:Headers,ep=(e,t,i)=>{let n=ed(i),s=ef();return(i,r)=>(function(e,t,i,n){return new(i||(i=Promise))(function(s,r){function o(e){try{h(n.next(e))}catch(e){r(e)}}function a(e){try{h(n.throw(e))}catch(e){r(e)}}function h(e){var t;e.done?s(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(o,a)}h((n=n.apply(e,t||[])).next())})})(void 0,void 0,void 0,function*(){var o;let a=null!==(o=yield t())&&void 0!==o?o:e,h=new s(null==r?void 0:r.headers);return h.has("apikey")||h.set("apikey",e),h.has("Authorization")||h.set("Authorization",`Bearer ${a}`),n(i,Object.assign(Object.assign({},r),{headers:h}))})};var ev=i(597);class eg extends ev.LY{constructor(e){super(e)}}class em{constructor(e,t,i){var n,s,r;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw Error("supabaseUrl is required.");if(!t)throw Error("supabaseKey is required.");let o=e.replace(/\/$/,"");this.realtimeUrl=`${o}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${o}/auth/v1`,this.storageUrl=`${o}/storage/v1`,this.functionsUrl=`${o}/functions/v1`;let a=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,h=function(e,t){let{db:i,auth:n,realtime:s,global:r}=e,{db:o,auth:a,realtime:h,global:c}=t,l={db:Object.assign(Object.assign({},o),i),auth:Object.assign(Object.assign({},a),n),realtime:Object.assign(Object.assign({},h),s),global:Object.assign(Object.assign({},c),r),accessToken:()=>{var e,t,i,n;return e=this,t=void 0,n=function*(){return""},new(i=void 0,i=Promise)(function(s,r){function o(e){try{h(n.next(e))}catch(e){r(e)}}function a(e){try{h(n.throw(e))}catch(e){r(e)}}function h(e){var t;e.done?s(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(o,a)}h((n=n.apply(e,t||[])).next())})}};return e.accessToken?l.accessToken=e.accessToken:delete l.accessToken,l}(null!=i?i:{},{db:eh,realtime:el,auth:Object.assign(Object.assign({},ec),{storageKey:a}),global:ea});this.storageKey=null!==(n=h.auth.storageKey)&&void 0!==n?n:"",this.headers=null!==(s=h.global.headers)&&void 0!==s?s:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(r=h.auth)&&void 0!==r?r:{},this.headers,h.global.fetch),this.fetch=ep(t,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new p.po(`${o}/rest/v1`,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new f.b(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new er(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},i={}){return this.rest.rpc(e,t,i)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t,i,n,s,r;return i=this,n=void 0,s=void 0,r=function*(){if(this.accessToken)return yield this.accessToken();let{data:i}=yield this.auth.getSession();return null!==(t=null===(e=i.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null},new(s||(s=Promise))(function(e,t){function o(e){try{h(r.next(e))}catch(e){t(e)}}function a(e){try{h(r.throw(e))}catch(e){t(e)}}function h(t){var i;t.done?e(t.value):((i=t.value)instanceof s?i:new s(function(e){e(i)})).then(o,a)}h((r=r.apply(i,n||[])).next())})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:i,storage:n,storageKey:s,flowType:r,lock:o,debug:a},h,c){let l={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new eg({url:this.authUrl,headers:Object.assign(Object.assign({},l),h),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:i,storage:n,flowType:r,lock:o,debug:a,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new x(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,i){("TOKEN_REFRESHED"===e||"SIGNED_IN"===e)&&this.changedAccessToken!==i?this.changedAccessToken=i:"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0)}}let eb=(e,t,i)=>new em(e,t,i)},182:e=>{e.exports=function(){throw Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}}]);
//# sourceMappingURL=517.js.map
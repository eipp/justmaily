"use strict";(()=>{var e={};e.id=853,e.ids=[853],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},42454:(e,t,r)=>{let a;r.r(t),r.d(t,{originalPathname:()=>S,patchFetch:()=>x,requestAsyncStorage:()=>f,routeModule:()=>_,serverHooks:()=>v,staticGenerationAsyncStorage:()=>E});var o={};r.r(o),r.d(o,{GET:()=>m});var n=r(57418),i=r(90231),c=r(98062);let s={query:async(e,t)=>(console.log("db query:",e,t),[])},g={get:async e=>null,set:async(e,t)=>{console.log("cache set:",e,t)}},u={find:async e=>(console.log("search find:",e),[])},l={recordLatency:(e,t)=>{console.log(`[MetricsService] ${e}: ${t}ms`)},recordError:(e,t)=>{console.error(`[MetricsService] ${e}`,t)}},m=(a={handler:async e=>{let{searchParams:t}=new URL(e.url);switch(t.get("type")){case"api":return await w();case"db":return await d();case"cache":return await h();case"search":return await p();default:return await y()}}},async(e,t)=>{try{await a(e,t)}catch(e){t.status(500).json({error:"Internal Server Error"})}});async function w(){let e=Date.now();try{let t=await l.getSystemHealth(),r=await l.getErrorRate("5m"),a=await l.getResponseTimeHistory("1h"),o=await l.getRequestRate("5m"),n=await l.getEndpointMetrics(),i=await l.getRateLimitingMetrics("1h"),c=await l.getRequestVolume("1h");return l.recordLatency("monitoring_api_metrics",Date.now()-e),{systemHealth:t,errorRate:r,responseTimeHistory:a,requestRate:o,endpointMetrics:n,rateLimiting:i,requestVolume:c}}catch(e){throw l.recordError("monitoring_api_metrics_error",e instanceof Error?e.message:String(e)),e}}async function d(){let e=Date.now();try{let t=await s.getSlowQueries(),r=await s.getConnectionPoolStats("1h"),a=await s.getTransactionMetrics("1h");return l.recordLatency("monitoring_db_metrics",Date.now()-e),{slowQueries:t,connectionPool:r,transactions:a}}catch(e){throw l.recordError("monitoring_db_metrics_error",e instanceof Error?e.message:String(e)),e}}async function h(){let e=Date.now();try{let t=await g.getHitRate("1h"),r=await g.getMemoryUsage("1h"),a=await g.getEvictionStats("1h");return l.recordLatency("monitoring_cache_metrics",Date.now()-e),{hitRate:t,memoryUsage:r,evictions:a}}catch(e){throw l.recordError("monitoring_cache_metrics_error",e instanceof Error?e.message:String(e)),e}}async function p(){let e=Date.now();try{let t=await u.getLatencyMetrics("1h"),r=await u.getQueryVolume("1h"),a=await u.getIndexStats();return l.recordLatency("monitoring_search_metrics",Date.now()-e),{latency:t,queryVolume:r,indexStats:a}}catch(e){throw l.recordError("monitoring_search_metrics_error",e instanceof Error?e.message:String(e)),e}}async function y(){let e=Date.now();try{let[t,r,a,o]=await Promise.all([w(),d(),h(),p()]);return l.recordLatency("monitoring_all_metrics",Date.now()-e),{api:t,db:r,cache:a,search:o}}catch(e){throw l.recordError("monitoring_all_metrics_error",e instanceof Error?e.message:String(e)),e}}let _=new n.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/monitoring/route",pathname:"/api/monitoring",filename:"route",bundlePath:"app/api/monitoring/route"},resolvedPagePath:"/Users/ivanpeychev/Projects/MindburnLabs/justmaily/packages/apps/maily-web/app/api/monitoring/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:f,staticGenerationAsyncStorage:E,serverHooks:v}=_,S="/api/monitoring/route";function x(){return(0,c.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:E})}},57418:(e,t,r)=>{e.exports=r(30517)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[632,305,533,49,666,866,385],()=>r(42454));module.exports=a})();
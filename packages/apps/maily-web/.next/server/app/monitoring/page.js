(()=>{var e={};e.id=738,e.ids=[738],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7881:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c}),a(52172),a(72417),a(67164);var i=a(92509),s=a(90231),r=a(25220),n=a.n(r),l=a(2682),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(t,o);let c=["",{children:["monitoring",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,52172)),"/Users/ivanpeychev/Projects/MindburnLabs/justmaily/packages/apps/maily-web/app/monitoring/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,72417)),"/Users/ivanpeychev/Projects/MindburnLabs/justmaily/packages/apps/maily-web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,67164,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/ivanpeychev/Projects/MindburnLabs/justmaily/packages/apps/maily-web/app/monitoring/page.tsx"],u="/monitoring/page",m={require:a,loadChunk:()=>Promise.resolve()},x=new i.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/monitoring/page",pathname:"/monitoring",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},78303:(e,t,a)=>{Promise.resolve().then(a.bind(a,44021))},44021:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>L});var i=a(76967),s=a(48572),r=a(84611);let n={monitoring:{async getApiMetrics(){let e=await fetch("/api/monitoring?type=api");if(!e.ok)throw Error("Failed to fetch API metrics");return e.json()},async getDbMetrics(){let e=await fetch("/api/monitoring?type=db");if(!e.ok)throw Error("Failed to fetch database metrics");return e.json()},async getCacheMetrics(){let e=await fetch("/api/monitoring?type=cache");if(!e.ok)throw Error("Failed to fetch cache metrics");return e.json()},async getSearchMetrics(){let e=await fetch("/api/monitoring?type=search");if(!e.ok)throw Error("Failed to fetch search metrics");return e.json()},async getAllMetrics(){let e=await fetch("/api/monitoring");if(!e.ok)throw Error("Failed to fetch all metrics");return e.json()}}};var l=a(72491),o=a(2466);function c({title:e,value:t,description:a,trend:s,className:r,loading:n=!1}){return(0,i.jsxs)(l.Zb,{className:(0,o.cn)("overflow-hidden",r),children:[(0,i.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(l.ll,{className:"text-sm font-medium",children:e}),void 0!==s&&(0,i.jsxs)("span",{className:(0,o.cn)("text-xs font-medium",s>0?"text-green-600":s<0?"text-red-600":"text-gray-600"),children:[s>0?"+":"",s,"%"]})]}),i.jsx(l.aY,{children:n?i.jsx("div",{className:"h-9 w-full animate-pulse rounded bg-gray-200"}):(0,i.jsxs)(i.Fragment,{children:[i.jsx("div",{className:"text-2xl font-bold",children:t}),a&&i.jsx("p",{className:"text-xs text-muted-foreground",children:a})]})})]})}var d=a(28957),u=a(38682),m=a(47993),x=a(11492),p=a(51671),h=a(721),y=a(41085),g=a(55595);function j({title:e,data:t,type:a="area",dataKey:s,xAxisKey:r="timestamp",className:n,loading:c=!1,height:j=350,color:f="#0ea5e9"}){return(0,i.jsxs)(l.Zb,{className:(0,o.cn)("overflow-hidden",n),children:[i.jsx(l.Ol,{children:i.jsx(l.ll,{className:"text-sm font-medium",children:e})}),i.jsx(l.aY,{children:c?i.jsx("div",{className:"w-full animate-pulse rounded bg-gray-200",style:{height:`${j}px`}}):i.jsx(d.h,{width:"100%",height:j,children:"area"===a?(0,i.jsxs)(u.T,{data:t,children:[i.jsx("defs",{children:(0,i.jsxs)("linearGradient",{id:`gradient-${e}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"5%",stopColor:f,stopOpacity:.8}),i.jsx("stop",{offset:"95%",stopColor:f,stopOpacity:0})]})}),i.jsx(m.K,{dataKey:r,stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1}),i.jsx(x.B,{stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:e=>`${e}`}),i.jsx(p.u,{}),i.jsx(h.u,{type:"monotone",dataKey:s,stroke:f,fillOpacity:1,fill:`url(#gradient-${e})`})]}):(0,i.jsxs)(y.v,{data:t,children:[i.jsx(m.K,{dataKey:r,stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1}),i.jsx(x.B,{stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:e=>`${e}`}),i.jsx(p.u,{}),i.jsx(g.$,{dataKey:s,fill:f,radius:[4,4,0,0]})]})})})]})}a(78270);let f=({children:e})=>i.jsx("table",{style:{width:"100%",borderCollapse:"collapse"},children:e}),v=({children:e})=>i.jsx("thead",{children:e}),b=({children:e})=>i.jsx("tr",{children:e}),k=({children:e})=>i.jsx("th",{children:e}),w=({children:e})=>i.jsx("tbody",{children:e}),P=({children:e})=>i.jsx("td",{children:e});function N({title:e,columns:t,data:a,className:s,loading:r=!1}){return(0,i.jsxs)(l.Zb,{className:(0,o.cn)("overflow-hidden",s),children:[i.jsx(l.Ol,{children:i.jsx(l.ll,{className:"text-sm font-medium",children:e})}),i.jsx(l.aY,{children:r?i.jsx("div",{className:"space-y-2",children:Array.from({length:5}).map((e,t)=>i.jsx("div",{className:"h-8 w-full animate-pulse rounded bg-gray-200"},t))}):i.jsx("div",{className:"relative w-full overflow-auto",children:(0,i.jsxs)(f,{children:[i.jsx(v,{children:i.jsx(b,{children:t.map(e=>i.jsx(k,{children:e.title},e.key))})}),i.jsx(w,{children:a.map((e,a)=>i.jsx(b,{children:t.map(t=>i.jsx(P,{children:t.format?t.format(e[t.key]):e[t.key]},t.key))},a))})]})})})]})}function L(){let{data:e,isLoading:t}=(0,s.a)({queryKey:["metrics","api"],queryFn:()=>n.monitoring.getApiMetrics(),refetchInterval:3e4}),{data:a,isLoading:l}=(0,s.a)({queryKey:["metrics","db"],queryFn:()=>n.monitoring.getDbMetrics(),refetchInterval:3e4}),{data:d,isLoading:u}=(0,s.a)({queryKey:["metrics","cache"],queryFn:()=>n.monitoring.getCacheMetrics(),refetchInterval:3e4}),{data:m,isLoading:x}=(0,s.a)({queryKey:["metrics","search"],queryFn:()=>n.monitoring.getSearchMetrics(),refetchInterval:3e4});return i.jsx("div",{className:"container mx-auto py-10",children:(0,i.jsxs)(r.mQ,{defaultValue:"overview",className:"space-y-6",children:[(0,i.jsxs)(r.dr,{children:[i.jsx(r.SP,{value:"overview",children:"Overview"}),i.jsx(r.SP,{value:"api",children:"API"}),i.jsx(r.SP,{value:"database",children:"Database"}),i.jsx(r.SP,{value:"cache",children:"Cache"}),i.jsx(r.SP,{value:"search",children:"Search"})]}),(0,i.jsxs)(r.nU,{value:"overview",className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[i.jsx(c,{title:"System Status",value:e?.system.healthy?"Healthy":"Unhealthy",description:`Uptime: ${(0,o.LU)(e?.system.uptime)}`,loading:t}),i.jsx(c,{title:"Error Rate",value:`${(0,o.uf)(e?.errors.rate)}%`,trend:-2.5,loading:t}),i.jsx(c,{title:"Avg Response Time",value:(0,o.LU)(e?.responseTime.average),trend:1.8,loading:t}),i.jsx(c,{title:"Request Rate",value:`${(0,o.uf)(e?.requests.rate)}/s`,trend:5.2,loading:t})]}),(0,i.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsx(j,{title:"Response Time Distribution",data:e?.responseTime.distribution||[],type:"bar",dataKey:"count",xAxisKey:"bucket",loading:t}),i.jsx(j,{title:"Error Rate Trend",data:e?.errors.trend||[],dataKey:"count",loading:t,color:"#ef4444"})]})]}),i.jsx(r.nU,{value:"api",className:"space-y-6",children:i.jsx(N,{title:"Endpoint Performance",columns:[{key:"endpoint",title:"Endpoint"},{key:"count",title:"Requests",format:o.uf},{key:"avgResponseTime",title:"Avg Response Time",format:o.LU},{key:"errorRate",title:"Error Rate",format:e=>`${(0,o.uf)(e)}%`}],data:e?.requests.byEndpoint||[],loading:t})}),(0,i.jsxs)(r.nU,{value:"database",className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[i.jsx(c,{title:"Active Connections",value:(0,o.uf)(a?.activeConnections),description:`Pool Size: ${(0,o.uf)(a?.poolSize)}`,loading:l}),i.jsx(c,{title:"Waiting Connections",value:(0,o.uf)(a?.waitingConnections),loading:l})]}),i.jsx(N,{title:"Slow Queries",columns:[{key:"query",title:"Query"},{key:"duration",title:"Duration",format:o.LU},{key:"timestamp",title:"Timestamp",format:o.p6}],data:a?.slowQueries||[],loading:l})]}),(0,i.jsxs)(r.nU,{value:"cache",className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[i.jsx(c,{title:"Hit Rate",value:`${(0,o.uf)(d?.hitRate)}%`,loading:u}),i.jsx(c,{title:"Cache Size",value:(0,o.td)(d?.size),loading:u}),i.jsx(c,{title:"Evictions",value:(0,o.uf)(d?.evictions),loading:u})]}),i.jsx(N,{title:"Cache Keys",columns:[{key:"key",title:"Key"},{key:"hits",title:"Hits",format:o.uf},{key:"misses",title:"Misses",format:o.uf},{key:"size",title:"Size",format:o.td}],data:d?.byKey||[],loading:u})]}),(0,i.jsxs)(r.nU,{value:"search",className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[i.jsx(c,{title:"Average Latency",value:(0,o.LU)(m?.averageLatency),loading:x}),i.jsx(c,{title:"Query Volume",value:`${(0,o.uf)(m?.queryVolume)}/s`,loading:x}),i.jsx(c,{title:"Index Size",value:(0,o.td)(m?.indexSize),loading:x})]}),i.jsx(N,{title:"Query Stats",columns:[{key:"type",title:"Query Type"},{key:"count",title:"Count",format:o.uf},{key:"avgLatency",title:"Avg Latency",format:o.LU}],data:m?.queryStats||[],loading:x})]})]})})}},52172:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});let i=(0,a(99867).createProxy)(String.raw`/Users/ivanpeychev/Projects/MindburnLabs/justmaily/packages/apps/maily-web/app/monitoring/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),i=t.X(0,[632,305,533,49,666,866,385,742,72,708,86,647,360,697,413,146],()=>a(7881));module.exports=i})();
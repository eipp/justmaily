(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[738],{32935:function(e,t,i){Promise.resolve().then(i.bind(i,49071))},49071:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return L}});var a=i(4908),s=i(11831),l=i(77307);let n={monitoring:{async getApiMetrics(){let e=await fetch("/api/monitoring?type=api");if(!e.ok)throw Error("Failed to fetch API metrics");return e.json()},async getDbMetrics(){let e=await fetch("/api/monitoring?type=db");if(!e.ok)throw Error("Failed to fetch database metrics");return e.json()},async getCacheMetrics(){let e=await fetch("/api/monitoring?type=cache");if(!e.ok)throw Error("Failed to fetch cache metrics");return e.json()},async getSearchMetrics(){let e=await fetch("/api/monitoring?type=search");if(!e.ok)throw Error("Failed to fetch search metrics");return e.json()},async getAllMetrics(){let e=await fetch("/api/monitoring");if(!e.ok)throw Error("Failed to fetch all metrics");return e.json()}}};var r=i(54046),o=i(1847);function c(e){let{title:t,value:i,description:s,trend:l,className:n,loading:c=!1}=e;return(0,a.jsxs)(r.Zb,{className:(0,o.cn)("overflow-hidden",n),children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ll,{className:"text-sm font-medium",children:t}),void 0!==l&&(0,a.jsxs)("span",{className:(0,o.cn)("text-xs font-medium",l>0?"text-green-600":l<0?"text-red-600":"text-gray-600"),children:[l>0?"+":"",l,"%"]})]}),(0,a.jsx)(r.aY,{children:c?(0,a.jsx)("div",{className:"h-9 w-full animate-pulse rounded bg-gray-200"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:i}),s&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:s})]})})]})}var d=i(79260),u=i(60948),h=i(77142),m=i(2912),x=i(2823),y=i(9265),j=i(23630),f=i(77872);function v(e){let{title:t,data:i,type:s="area",dataKey:l,xAxisKey:n="timestamp",className:c,loading:v=!1,height:g=350,color:p="#0ea5e9"}=e;return(0,a.jsxs)(r.Zb,{className:(0,o.cn)("overflow-hidden",c),children:[(0,a.jsx)(r.Ol,{children:(0,a.jsx)(r.ll,{className:"text-sm font-medium",children:t})}),(0,a.jsx)(r.aY,{children:v?(0,a.jsx)("div",{className:"w-full animate-pulse rounded bg-gray-200",style:{height:"".concat(g,"px")}}):(0,a.jsx)(d.h,{width:"100%",height:g,children:"area"===s?(0,a.jsxs)(u.T,{data:i,children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"gradient-".concat(t),x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:p,stopOpacity:.8}),(0,a.jsx)("stop",{offset:"95%",stopColor:p,stopOpacity:0})]})}),(0,a.jsx)(h.K,{dataKey:n,stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1}),(0,a.jsx)(m.B,{stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:e=>"".concat(e)}),(0,a.jsx)(x.u,{}),(0,a.jsx)(y.u,{type:"monotone",dataKey:l,stroke:p,fillOpacity:1,fill:"url(#gradient-".concat(t,")")})]}):(0,a.jsxs)(j.v,{data:i,children:[(0,a.jsx)(h.K,{dataKey:n,stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1}),(0,a.jsx)(m.B,{stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:e=>"".concat(e)}),(0,a.jsx)(x.u,{}),(0,a.jsx)(f.$,{dataKey:l,fill:p,radius:[4,4,0,0]})]})})})]})}i(8772);let g=e=>{let{children:t}=e;return(0,a.jsx)("table",{style:{width:"100%",borderCollapse:"collapse"},children:t})},p=e=>{let{children:t}=e;return(0,a.jsx)("thead",{children:t})},k=e=>{let{children:t}=e;return(0,a.jsx)("tr",{children:t})},w=e=>{let{children:t}=e;return(0,a.jsx)("th",{children:t})},N=e=>{let{children:t}=e;return(0,a.jsx)("tbody",{children:t})},b=e=>{let{children:t}=e;return(0,a.jsx)("td",{children:t})};function S(e){let{title:t,columns:i,data:s,className:l,loading:n=!1}=e;return(0,a.jsxs)(r.Zb,{className:(0,o.cn)("overflow-hidden",l),children:[(0,a.jsx)(r.Ol,{children:(0,a.jsx)(r.ll,{className:"text-sm font-medium",children:t})}),(0,a.jsx)(r.aY,{children:n?(0,a.jsx)("div",{className:"space-y-2",children:Array.from({length:5}).map((e,t)=>(0,a.jsx)("div",{className:"h-8 w-full animate-pulse rounded bg-gray-200"},t))}):(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsxs)(g,{children:[(0,a.jsx)(p,{children:(0,a.jsx)(k,{children:i.map(e=>(0,a.jsx)(w,{children:e.title},e.key))})}),(0,a.jsx)(N,{children:s.map((e,t)=>(0,a.jsx)(k,{children:i.map(t=>(0,a.jsx)(b,{children:t.format?t.format(e[t.key]):e[t.key]},t.key))},t))})]})})})]})}function L(){let{data:e,isLoading:t}=(0,s.a)({queryKey:["metrics","api"],queryFn:()=>n.monitoring.getApiMetrics(),refetchInterval:3e4}),{data:i,isLoading:r}=(0,s.a)({queryKey:["metrics","db"],queryFn:()=>n.monitoring.getDbMetrics(),refetchInterval:3e4}),{data:d,isLoading:u}=(0,s.a)({queryKey:["metrics","cache"],queryFn:()=>n.monitoring.getCacheMetrics(),refetchInterval:3e4}),{data:h,isLoading:m}=(0,s.a)({queryKey:["metrics","search"],queryFn:()=>n.monitoring.getSearchMetrics(),refetchInterval:3e4});return(0,a.jsx)("div",{className:"container mx-auto py-10",children:(0,a.jsxs)(l.mQ,{defaultValue:"overview",className:"space-y-6",children:[(0,a.jsxs)(l.dr,{children:[(0,a.jsx)(l.SP,{value:"overview",children:"Overview"}),(0,a.jsx)(l.SP,{value:"api",children:"API"}),(0,a.jsx)(l.SP,{value:"database",children:"Database"}),(0,a.jsx)(l.SP,{value:"cache",children:"Cache"}),(0,a.jsx)(l.SP,{value:"search",children:"Search"})]}),(0,a.jsxs)(l.nU,{value:"overview",className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsx)(c,{title:"System Status",value:(null==e?void 0:e.system.healthy)?"Healthy":"Unhealthy",description:"Uptime: ".concat((0,o.LU)(null==e?void 0:e.system.uptime)),loading:t}),(0,a.jsx)(c,{title:"Error Rate",value:"".concat((0,o.uf)(null==e?void 0:e.errors.rate),"%"),trend:-2.5,loading:t}),(0,a.jsx)(c,{title:"Avg Response Time",value:(0,o.LU)(null==e?void 0:e.responseTime.average),trend:1.8,loading:t}),(0,a.jsx)(c,{title:"Request Rate",value:"".concat((0,o.uf)(null==e?void 0:e.requests.rate),"/s"),trend:5.2,loading:t})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsx)(v,{title:"Response Time Distribution",data:(null==e?void 0:e.responseTime.distribution)||[],type:"bar",dataKey:"count",xAxisKey:"bucket",loading:t}),(0,a.jsx)(v,{title:"Error Rate Trend",data:(null==e?void 0:e.errors.trend)||[],dataKey:"count",loading:t,color:"#ef4444"})]})]}),(0,a.jsx)(l.nU,{value:"api",className:"space-y-6",children:(0,a.jsx)(S,{title:"Endpoint Performance",columns:[{key:"endpoint",title:"Endpoint"},{key:"count",title:"Requests",format:o.uf},{key:"avgResponseTime",title:"Avg Response Time",format:o.LU},{key:"errorRate",title:"Error Rate",format:e=>"".concat((0,o.uf)(e),"%")}],data:(null==e?void 0:e.requests.byEndpoint)||[],loading:t})}),(0,a.jsxs)(l.nU,{value:"database",className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,a.jsx)(c,{title:"Active Connections",value:(0,o.uf)(null==i?void 0:i.activeConnections),description:"Pool Size: ".concat((0,o.uf)(null==i?void 0:i.poolSize)),loading:r}),(0,a.jsx)(c,{title:"Waiting Connections",value:(0,o.uf)(null==i?void 0:i.waitingConnections),loading:r})]}),(0,a.jsx)(S,{title:"Slow Queries",columns:[{key:"query",title:"Query"},{key:"duration",title:"Duration",format:o.LU},{key:"timestamp",title:"Timestamp",format:o.p6}],data:(null==i?void 0:i.slowQueries)||[],loading:r})]}),(0,a.jsxs)(l.nU,{value:"cache",className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,a.jsx)(c,{title:"Hit Rate",value:"".concat((0,o.uf)(null==d?void 0:d.hitRate),"%"),loading:u}),(0,a.jsx)(c,{title:"Cache Size",value:(0,o.td)(null==d?void 0:d.size),loading:u}),(0,a.jsx)(c,{title:"Evictions",value:(0,o.uf)(null==d?void 0:d.evictions),loading:u})]}),(0,a.jsx)(S,{title:"Cache Keys",columns:[{key:"key",title:"Key"},{key:"hits",title:"Hits",format:o.uf},{key:"misses",title:"Misses",format:o.uf},{key:"size",title:"Size",format:o.td}],data:(null==d?void 0:d.byKey)||[],loading:u})]}),(0,a.jsxs)(l.nU,{value:"search",className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,a.jsx)(c,{title:"Average Latency",value:(0,o.LU)(null==h?void 0:h.averageLatency),loading:m}),(0,a.jsx)(c,{title:"Query Volume",value:"".concat((0,o.uf)(null==h?void 0:h.queryVolume),"/s"),loading:m}),(0,a.jsx)(c,{title:"Index Size",value:(0,o.td)(null==h?void 0:h.indexSize),loading:m})]}),(0,a.jsx)(S,{title:"Query Stats",columns:[{key:"type",title:"Query Type"},{key:"count",title:"Count",format:o.uf},{key:"avgLatency",title:"Avg Latency",format:o.LU}],data:(null==h?void 0:h.queryStats)||[],loading:m})]})]})})}}},function(e){e.O(0,[351,318,102,198,143,436,391,660,630,905,327,806,329,744],function(){return e(e.s=32935)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[446],{9158:function(e,s,l){Promise.resolve().then(l.bind(l,64320))},64320:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return y}});var a=l(4908),t=l(8772),i=l(46007),n=l(84816),c=l(77307),r=l(54046),d=l(45919),x=l(23504),m=l(36938);let h=(0,m.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);var o=l(1607);let j=(0,m.Z)("MousePointerClick",[["path",{d:"m9 9 5 12 1.8-5.2L21 14Z",key:"1b76lo"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}]]),u=(0,m.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);function y(e){let{params:s}=e,l=(0,i.useRouter)(),{supabase:m,user:y}=useSupabase(),[p,g]=(0,t.useState)(!0),[f,b]=(0,t.useState)(null),[v,N]=(0,t.useState)(null),[k,w]=(0,t.useState)("7d");(0,t.useEffect)(()=>{Z()},[s.id,k]);let Z=async()=>{g(!0),b(null);try{let{data:e,error:a}=await m.from("projects").select("owner_id, settings").eq("id",s.id).single();if(a)throw a;if(e.owner_id!==(null==y?void 0:y.id)){l.push("/dashboard");return}if(!e.settings.enableAnalytics){b("Analytics are not enabled for this project"),g(!1);return}let t=await R(s.id,k);N(t)}catch(e){b("Failed to load analytics data")}finally{g(!1)}},R=async(e,s)=>({overview:{totalEmails:15e3,deliveryRate:98.5,openRate:45.2,clickRate:12.8,bounceRate:1.5},engagement:{dailyOpens:[{date:"2024-01-01",count:250},{date:"2024-01-02",count:300}],dailyClicks:[{date:"2024-01-01",count:75},{date:"2024-01-02",count:90}],topLinks:[{url:"https://example.com/product",clicks:450},{url:"https://example.com/pricing",clicks:320}]},deliverability:{bounces:[{type:"hard",count:150},{type:"soft",count:75}],complaints:25,blocks:50},timing:{bestSendTimes:[{hour:9,engagementRate:25.5},{hour:14,engagementRate:22.8}],bestDays:[{day:"Tuesday",engagementRate:24.5},{day:"Wednesday",engagementRate:23.2}]}});return p?(0,a.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-blue-600 border-t-transparent"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Loading analytics..."})]})}):f?(0,a.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-red-100 dark:bg-red-900",children:(0,a.jsx)(d.Z,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),(0,a.jsx)("p",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-gray-100",children:f})]})}):v?(0,a.jsx)("div",{className:"container mx-auto py-8",children:(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Project Analytics"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Track your project's performance and engagement metrics"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("select",{value:k,onChange:e=>w(e.target.value),className:"rounded-md border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700",children:[(0,a.jsx)("option",{value:"7d",children:"Last 7 days"}),(0,a.jsx)("option",{value:"30d",children:"Last 30 days"}),(0,a.jsx)("option",{value:"90d",children:"Last 90 days"}),(0,a.jsx)("option",{value:"1y",children:"Last year"})]}),(0,a.jsx)(n.z,{onClick:Z,children:"Refresh"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ll,{className:"text-sm font-medium",children:"Total Emails"}),(0,a.jsx)(x.Z,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})]}),(0,a.jsxs)(r.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:v.overview.totalEmails.toLocaleString()}),(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Sent during selected period"})]})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ll,{className:"text-sm font-medium",children:"Delivery Rate"}),(0,a.jsx)(h,{className:"h-4 w-4 text-green-600"})]}),(0,a.jsxs)(r.aY,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[v.overview.deliveryRate,"%"]}),(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Successfully delivered"})]})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ll,{className:"text-sm font-medium",children:"Open Rate"}),(0,a.jsx)(o.Z,{className:"h-4 w-4 text-blue-600"})]}),(0,a.jsxs)(r.aY,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[v.overview.openRate,"%"]}),(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Of delivered emails"})]})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ll,{className:"text-sm font-medium",children:"Click Rate"}),(0,a.jsx)(j,{className:"h-4 w-4 text-purple-600"})]}),(0,a.jsxs)(r.aY,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[v.overview.clickRate,"%"]}),(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Of opened emails"})]})]})]}),(0,a.jsxs)(c.mQ,{defaultValue:"engagement",className:"space-y-4",children:[(0,a.jsxs)(c.dr,{children:[(0,a.jsxs)(c.SP,{value:"engagement",className:"flex items-center",children:[(0,a.jsx)(o.Z,{className:"mr-2 h-4 w-4"}),"Engagement"]}),(0,a.jsxs)(c.SP,{value:"deliverability",className:"flex items-center",children:[(0,a.jsx)(x.Z,{className:"mr-2 h-4 w-4"}),"Deliverability"]}),(0,a.jsxs)(c.SP,{value:"timing",className:"flex items-center",children:[(0,a.jsx)(u,{className:"mr-2 h-4 w-4"}),"Timing"]})]}),(0,a.jsx)(c.nU,{value:"engagement",className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.Ol,{children:(0,a.jsx)(r.ll,{children:"Daily Opens"})}),(0,a.jsx)(r.aY,{children:(0,a.jsx)("div",{className:"h-[200px] w-full bg-gray-100 dark:bg-gray-800"})})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.Ol,{children:(0,a.jsx)(r.ll,{children:"Daily Clicks"})}),(0,a.jsx)(r.aY,{children:(0,a.jsx)("div",{className:"h-[200px] w-full bg-gray-100 dark:bg-gray-800"})})]})]})}),(0,a.jsx)(c.nU,{value:"deliverability",className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.Ol,{children:(0,a.jsx)(r.ll,{children:"Bounce Types"})}),(0,a.jsx)(r.aY,{children:(0,a.jsx)("div",{className:"space-y-4",children:v.deliverability.bounces.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"capitalize",children:[e.type," Bounces"]}),(0,a.jsx)("span",{className:"font-medium",children:e.count})]},e.type))})})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.Ol,{children:(0,a.jsx)(r.ll,{children:"Delivery Issues"})}),(0,a.jsx)(r.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"Complaints"}),(0,a.jsx)("span",{className:"font-medium",children:v.deliverability.complaints})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"Blocks"}),(0,a.jsx)("span",{className:"font-medium",children:v.deliverability.blocks})]})]})})]})]})}),(0,a.jsx)(c.nU,{value:"timing",className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.Ol,{children:(0,a.jsx)(r.ll,{children:"Best Send Times"})}),(0,a.jsx)(r.aY,{children:(0,a.jsx)("div",{className:"space-y-4",children:v.timing.bestSendTimes.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{children:[e.hour,":00"]}),(0,a.jsxs)("span",{className:"font-medium",children:[e.engagementRate,"% engagement"]})]},e.hour))})})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.Ol,{children:(0,a.jsx)(r.ll,{children:"Best Days"})}),(0,a.jsx)(r.aY,{children:(0,a.jsx)("div",{className:"space-y-4",children:v.timing.bestDays.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:e.day}),(0,a.jsxs)("span",{className:"font-medium",children:[e.engagementRate,"% engagement"]})]},e.day))})})]})]})})]})]})}):null}}},function(e){e.O(0,[351,630,905,327,806,329,744],function(){return e(e.s=9158)}),_N_E=e.O()}]);
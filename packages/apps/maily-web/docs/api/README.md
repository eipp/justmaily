# Maily API Documentation

This document provides an overview of the API endpoints for the Maily platform—an AI-first, autonomous email marketing solution powered by self-hosted AI agents. The API is designed for dynamic campaign creation, automated agent orchestration, real-time analytics, and compliance management.

## RESTful API Endpoints

| Endpoint                     | Method | Description |
| ---------------------------- | ------ | ----------- |
| `/v1/campaigns`              | POST   | Create a new campaign with AI-generated variants and personalized configurations. |
| `/v1/campaigns/{id}/deploy`   | PUT    | Deploy a campaign with specified AI agent parameters to enable real-time adjustments and ensure ethical guardrails. |
| `/v1/analytics/co2`          | GET    | Fetch carbon footprint metrics for a campaign using integrated Climatiq API. |
| `/v1/agents/{id}/tools`      | GET    | List tools auto-generated by an agent (e.g., API clients, compliance checks). |

## GraphQL API

The platform also supports GraphQL for more flexible querying.

Example query:

```graphql
query GetCampaign($id: ID!) {
  campaign(id: $id) {
    variants {
      subjectLine
      predictedROI
      carbonImpact
    }
    agentLogs {
      action
      timestamp
    }
  }
}
```

## Webhooks

Maily supports webhook notifications to keep clients updated on critical events:

| Event                   | Payload Example                                                                           | Description |
| ----------------------- | ----------------------------------------------------------------------------------------- | ----------- |
| `campaign.deployed`     | `{ "id": "camp_123", "status": "live", "agent_id": "agent_456" }`              | Triggered when a campaign is successfully deployed by autonomous agents. |
| `compliance.violation`  | `{ "reason": "Unverified sustainability claim", "snippet": "100% eco-friendly" }` | Notifies of compliance issues detected by NeMo Guardrails. |

## Authentication

Authentication is managed via API keys with role-based scopes or OAuth 2.1 using the PKCE flow for third-party integrations.

- **API Keys:** Scoped access (e.g., `read_only`, `campaign_manager`).
- **OAuth 2.1:** Provides secure, passwordless authentication.

## Alignment with Maily Vision

The API is a critical component of our vision to provide a self-hosted, autonomous, and adaptive email marketing experience. It enables dynamic campaign creation, real-time performance analytics, and secure, ethical interactions—fully aligning with our strategic objectives for an AI-first platform. 
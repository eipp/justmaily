(()=>{var e={};e.id=5738,e.ids=[5738],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},74575:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),s(26013),s(11506),s(35866);var i=s(23191),a=s(88716),r=s(37922),n=s.n(r),l=s(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["monitoring",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,26013)),"/Users/ivanpeychev/Projects/MindburnLabs/justmaily/apps/maily-web/app/monitoring/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,11506)),"/Users/ivanpeychev/Projects/MindburnLabs/justmaily/apps/maily-web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/ivanpeychev/Projects/MindburnLabs/justmaily/apps/maily-web/app/monitoring/page.tsx"],u="/monitoring/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new i.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/monitoring/page",pathname:"/monitoring",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},39067:(e,t,s)=>{Promise.resolve().then(s.bind(s,19023))},19023:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>L});var i=s(10326),a=s(7369),r=s(79210),n=s(59341),l=s(33071),o=s(77863);function d({title:e,value:t,description:s,trend:a,className:r,loading:n=!1}){return(0,i.jsxs)(l.Zb,{className:(0,o.cn)("overflow-hidden",r),children:[(0,i.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(l.ll,{className:"text-sm font-medium",children:e}),void 0!==a&&(0,i.jsxs)("span",{className:(0,o.cn)("text-xs font-medium",a>0?"text-green-600":a<0?"text-red-600":"text-gray-600"),children:[a>0?"+":"",a,"%"]})]}),i.jsx(l.aY,{children:n?i.jsx("div",{className:"h-9 w-full animate-pulse rounded bg-gray-200"}):(0,i.jsxs)(i.Fragment,{children:[i.jsx("div",{className:"text-2xl font-bold",children:t}),s&&i.jsx("p",{className:"text-xs text-muted-foreground",children:s})]})})]})}var c=s(30660),u=s(10669),m=s(62637),x=s(9997),p=s(64263),h=s(47445),y=s(49844),j=s(19018);function g({title:e,data:t,type:s="area",dataKey:a,xAxisKey:r="timestamp",className:n,loading:d=!1,height:g=350,color:v="#0ea5e9"}){return(0,i.jsxs)(l.Zb,{className:(0,o.cn)("overflow-hidden",n),children:[i.jsx(l.Ol,{children:i.jsx(l.ll,{className:"text-sm font-medium",children:e})}),i.jsx(l.aY,{children:d?i.jsx("div",{className:"w-full animate-pulse rounded bg-gray-200",style:{height:`${g}px`}}):i.jsx(c.h,{width:"100%",height:g,children:"area"===s?(0,i.jsxs)(u.T,{data:t,children:[i.jsx("defs",{children:(0,i.jsxs)("linearGradient",{id:`gradient-${e}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"5%",stopColor:v,stopOpacity:.8}),i.jsx("stop",{offset:"95%",stopColor:v,stopOpacity:0})]})}),i.jsx(m.K,{dataKey:r,stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1}),i.jsx(x.B,{stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:e=>`${e}`}),i.jsx(p.u,{}),i.jsx(h.u,{type:"monotone",dataKey:a,stroke:v,fillOpacity:1,fill:`url(#gradient-${e})`})]}):(0,i.jsxs)(y.v,{data:t,children:[i.jsx(m.K,{dataKey:r,stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1}),i.jsx(x.B,{stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:e=>`${e}`}),i.jsx(p.u,{}),i.jsx(j.$,{dataKey:a,fill:v,radius:[4,4,0,0]})]})})})]})}s(17577);let v=({children:e})=>i.jsx("table",{style:{width:"100%",borderCollapse:"collapse"},children:e}),f=({children:e})=>i.jsx("thead",{children:e}),b=({children:e})=>i.jsx("tr",{children:e}),k=({children:e})=>i.jsx("th",{children:e}),N=({children:e})=>i.jsx("tbody",{children:e}),P=({children:e})=>i.jsx("td",{children:e});function w({title:e,columns:t,data:s,className:a,loading:r=!1}){return(0,i.jsxs)(l.Zb,{className:(0,o.cn)("overflow-hidden",a),children:[i.jsx(l.Ol,{children:i.jsx(l.ll,{className:"text-sm font-medium",children:e})}),i.jsx(l.aY,{children:r?i.jsx("div",{className:"space-y-2",children:Array.from({length:5}).map((e,t)=>i.jsx("div",{className:"h-8 w-full animate-pulse rounded bg-gray-200"},t))}):i.jsx("div",{className:"relative w-full overflow-auto",children:(0,i.jsxs)(v,{children:[i.jsx(f,{children:i.jsx(b,{children:t.map(e=>i.jsx(k,{children:e.title},e.key))})}),i.jsx(N,{children:s.map((e,s)=>i.jsx(b,{children:t.map(t=>i.jsx(P,{children:t.format?t.format(e[t.key]):e[t.key]},t.key))},s))})]})})})]})}function L(){let{data:e,isLoading:t}=(0,a.useQuery)({queryKey:["metrics","api"],queryFn:()=>n.h.monitoring.getApiMetrics(),refetchInterval:3e4}),{data:s,isLoading:l}=(0,a.useQuery)({queryKey:["metrics","db"],queryFn:()=>n.h.monitoring.getDbMetrics(),refetchInterval:3e4}),{data:c,isLoading:u}=(0,a.useQuery)({queryKey:["metrics","cache"],queryFn:()=>n.h.monitoring.getCacheMetrics(),refetchInterval:3e4}),{data:m,isLoading:x}=(0,a.useQuery)({queryKey:["metrics","search"],queryFn:()=>n.h.monitoring.getSearchMetrics(),refetchInterval:3e4});return i.jsx("div",{className:"container mx-auto py-10",children:(0,i.jsxs)(r.mQ,{defaultValue:"overview",className:"space-y-6",children:[(0,i.jsxs)(r.dr,{children:[i.jsx(r.SP,{value:"overview",children:"Overview"}),i.jsx(r.SP,{value:"api",children:"API"}),i.jsx(r.SP,{value:"database",children:"Database"}),i.jsx(r.SP,{value:"cache",children:"Cache"}),i.jsx(r.SP,{value:"search",children:"Search"})]}),(0,i.jsxs)(r.nU,{value:"overview",className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[i.jsx(d,{title:"System Status",value:e?.system.healthy?"Healthy":"Unhealthy",description:`Uptime: ${(0,o.LU)(e?.system.uptime)}`,loading:t}),i.jsx(d,{title:"Error Rate",value:`${(0,o.uf)(e?.errors.rate)}%`,trend:-2.5,loading:t}),i.jsx(d,{title:"Avg Response Time",value:(0,o.LU)(e?.responseTime.average),trend:1.8,loading:t}),i.jsx(d,{title:"Request Rate",value:`${(0,o.uf)(e?.requests.rate)}/s`,trend:5.2,loading:t})]}),(0,i.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsx(g,{title:"Response Time Distribution",data:e?.responseTime.distribution||[],type:"bar",dataKey:"count",xAxisKey:"bucket",loading:t}),i.jsx(g,{title:"Error Rate Trend",data:e?.errors.trend||[],dataKey:"count",loading:t,color:"#ef4444"})]})]}),i.jsx(r.nU,{value:"api",className:"space-y-6",children:i.jsx(w,{title:"Endpoint Performance",columns:[{key:"endpoint",title:"Endpoint"},{key:"count",title:"Requests",format:o.uf},{key:"avgResponseTime",title:"Avg Response Time",format:o.LU},{key:"errorRate",title:"Error Rate",format:e=>`${(0,o.uf)(e)}%`}],data:e?.requests.byEndpoint||[],loading:t})}),(0,i.jsxs)(r.nU,{value:"database",className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[i.jsx(d,{title:"Active Connections",value:(0,o.uf)(s?.activeConnections),description:`Pool Size: ${(0,o.uf)(s?.poolSize)}`,loading:l}),i.jsx(d,{title:"Waiting Connections",value:(0,o.uf)(s?.waitingConnections),loading:l})]}),i.jsx(w,{title:"Slow Queries",columns:[{key:"query",title:"Query"},{key:"duration",title:"Duration",format:o.LU},{key:"timestamp",title:"Timestamp",format:o.p6}],data:s?.slowQueries||[],loading:l})]}),(0,i.jsxs)(r.nU,{value:"cache",className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[i.jsx(d,{title:"Hit Rate",value:`${(0,o.uf)(c?.hitRate)}%`,loading:u}),i.jsx(d,{title:"Cache Size",value:(0,o.td)(c?.size),loading:u}),i.jsx(d,{title:"Evictions",value:(0,o.uf)(c?.evictions),loading:u})]}),i.jsx(w,{title:"Cache Keys",columns:[{key:"key",title:"Key"},{key:"hits",title:"Hits",format:o.uf},{key:"misses",title:"Misses",format:o.uf},{key:"size",title:"Size",format:o.td}],data:c?.byKey||[],loading:u})]}),(0,i.jsxs)(r.nU,{value:"search",className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[i.jsx(d,{title:"Average Latency",value:(0,o.LU)(m?.averageLatency),loading:x}),i.jsx(d,{title:"Query Volume",value:`${(0,o.uf)(m?.queryVolume)}/s`,loading:x}),i.jsx(d,{title:"Index Size",value:(0,o.td)(m?.indexSize),loading:x})]}),i.jsx(w,{title:"Query Stats",columns:[{key:"type",title:"Query Type"},{key:"count",title:"Count",format:o.uf},{key:"avgLatency",title:"Avg Latency",format:o.LU}],data:m?.queryStats||[],loading:x})]})]})})}},26013:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});let i=(0,s(68570).createProxy)(String.raw`/Users/ivanpeychev/Projects/MindburnLabs/justmaily/apps/maily-web/app/monitoring/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),i=t.X(0,[9774,632,110,781,8057,4991,641,928,688,6865,2385,7665,935,9797,7807,5383,9497,8873],()=>s(74575));module.exports=i})();
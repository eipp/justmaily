(()=>{var e={};e.id=5738,e.ids=[5738],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},74575:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),a(26013),a(11506),a(35866);var s=a(23191),i=a(88716),r=a(37922),n=a.n(r),l=a(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(t,o);let d=["",{children:["monitoring",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,26013)),"/Users/ivanpeychev/Projects/MindburnLabs/justmaily/apps/maily-web/app/monitoring/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,11506)),"/Users/ivanpeychev/Projects/MindburnLabs/justmaily/apps/maily-web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/ivanpeychev/Projects/MindburnLabs/justmaily/apps/maily-web/app/monitoring/page.tsx"],u="/monitoring/page",m={require:a,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/monitoring/page",pathname:"/monitoring",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},39067:(e,t,a)=>{Promise.resolve().then(a.bind(a,19023))},19023:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var s={};a.r(s);var i=a(10326),r=a(7369),n=a(69920),l=a(59341),o=a(33071),d=a(77863);function c({title:e,value:t,description:a,trend:s,className:r,loading:n=!1}){return(0,i.jsxs)(o.Card,{className:(0,d.cn)("overflow-hidden",r),children:[(0,i.jsxs)(o.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(o.CardTitle,{className:"text-sm font-medium",children:e}),void 0!==s&&(0,i.jsxs)("span",{className:(0,d.cn)("text-xs font-medium",s>0?"text-green-600":s<0?"text-red-600":"text-gray-600"),children:[s>0?"+":"",s,"%"]})]}),i.jsx(o.CardContent,{children:n?i.jsx("div",{className:"h-9 w-full animate-pulse rounded bg-gray-200"}):(0,i.jsxs)(i.Fragment,{children:[i.jsx("div",{className:"text-2xl font-bold",children:t}),a&&i.jsx("p",{className:"text-xs text-muted-foreground",children:a})]})})]})}var u=a(30660),m=a(10669),x=a(62637),p=a(9997),y=a(64263),h=a(47445),g=a(49844),j=a(19018);function v({title:e,data:t,type:a="area",dataKey:s,xAxisKey:r="timestamp",className:n,loading:l=!1,height:c=350,color:v="#0ea5e9"}){return(0,i.jsxs)(o.Card,{className:(0,d.cn)("overflow-hidden",n),children:[i.jsx(o.CardHeader,{children:i.jsx(o.CardTitle,{className:"text-sm font-medium",children:e})}),i.jsx(o.CardContent,{children:l?i.jsx("div",{className:"w-full animate-pulse rounded bg-gray-200",style:{height:`${c}px`}}):i.jsx(u.h,{width:"100%",height:c,children:"area"===a?(0,i.jsxs)(m.T,{data:t,children:[i.jsx("defs",{children:(0,i.jsxs)("linearGradient",{id:`gradient-${e}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"5%",stopColor:v,stopOpacity:.8}),i.jsx("stop",{offset:"95%",stopColor:v,stopOpacity:0})]})}),i.jsx(x.K,{dataKey:r,stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1}),i.jsx(p.B,{stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:e=>`${e}`}),i.jsx(y.u,{}),i.jsx(h.u,{type:"monotone",dataKey:s,stroke:v,fillOpacity:1,fill:`url(#gradient-${e})`})]}):(0,i.jsxs)(g.v,{data:t,children:[i.jsx(x.K,{dataKey:r,stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1}),i.jsx(p.B,{stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:e=>`${e}`}),i.jsx(y.u,{}),i.jsx(j.$,{dataKey:s,fill:v,radius:[4,4,0,0]})]})})})]})}function f({title:e,columns:t,data:a,className:r,loading:n=!1}){return(0,i.jsxs)(o.Card,{className:(0,d.cn)("overflow-hidden",r),children:[i.jsx(o.CardHeader,{children:i.jsx(o.CardTitle,{className:"text-sm font-medium",children:e})}),i.jsx(o.CardContent,{children:n?i.jsx("div",{className:"space-y-2",children:Array.from({length:5}).map((e,t)=>i.jsx("div",{className:"h-8 w-full animate-pulse rounded bg-gray-200"},t))}):i.jsx("div",{className:"relative w-full overflow-auto",children:(0,i.jsxs)(s.Table,{children:[i.jsx(s.TableHeader,{children:i.jsx(s.TableRow,{children:t.map(e=>i.jsx(s.TableHead,{children:e.title},e.key))})}),i.jsx(s.TableBody,{children:a.map((e,a)=>i.jsx(s.TableRow,{children:t.map(t=>i.jsx(s.TableCell,{children:t.format?t.format(e[t.key]):e[t.key]},t.key))},a))})]})})})]})}function b(){let{data:e,isLoading:t}=(0,r.useQuery)({queryKey:["metrics","api"],queryFn:()=>l.h.monitoring.getApiMetrics(),refetchInterval:3e4}),{data:a,isLoading:s}=(0,r.useQuery)({queryKey:["metrics","db"],queryFn:()=>l.h.monitoring.getDbMetrics(),refetchInterval:3e4}),{data:o,isLoading:u}=(0,r.useQuery)({queryKey:["metrics","cache"],queryFn:()=>l.h.monitoring.getCacheMetrics(),refetchInterval:3e4}),{data:m,isLoading:x}=(0,r.useQuery)({queryKey:["metrics","search"],queryFn:()=>l.h.monitoring.getSearchMetrics(),refetchInterval:3e4});return i.jsx("div",{className:"container mx-auto py-10",children:(0,i.jsxs)(n.mQ,{defaultValue:"overview",className:"space-y-6",children:[(0,i.jsxs)(n.dr,{children:[i.jsx(n.SP,{value:"overview",children:"Overview"}),i.jsx(n.SP,{value:"api",children:"API"}),i.jsx(n.SP,{value:"database",children:"Database"}),i.jsx(n.SP,{value:"cache",children:"Cache"}),i.jsx(n.SP,{value:"search",children:"Search"})]}),(0,i.jsxs)(n.nU,{value:"overview",className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[i.jsx(c,{title:"System Status",value:e?.system.healthy?"Healthy":"Unhealthy",description:`Uptime: ${(0,d.LU)(e?.system.uptime)}`,loading:t}),i.jsx(c,{title:"Error Rate",value:`${(0,d.uf)(e?.errors.rate)}%`,trend:-2.5,loading:t}),i.jsx(c,{title:"Avg Response Time",value:(0,d.LU)(e?.responseTime.average),trend:1.8,loading:t}),i.jsx(c,{title:"Request Rate",value:`${(0,d.uf)(e?.requests.rate)}/s`,trend:5.2,loading:t})]}),(0,i.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsx(v,{title:"Response Time Distribution",data:e?.responseTime.distribution||[],type:"bar",dataKey:"count",xAxisKey:"bucket",loading:t}),i.jsx(v,{title:"Error Rate Trend",data:e?.errors.trend||[],dataKey:"count",loading:t,color:"#ef4444"})]})]}),i.jsx(n.nU,{value:"api",className:"space-y-6",children:i.jsx(f,{title:"Endpoint Performance",columns:[{key:"endpoint",title:"Endpoint"},{key:"count",title:"Requests",format:d.uf},{key:"avgResponseTime",title:"Avg Response Time",format:d.LU},{key:"errorRate",title:"Error Rate",format:e=>`${(0,d.uf)(e)}%`}],data:e?.requests.byEndpoint||[],loading:t})}),(0,i.jsxs)(n.nU,{value:"database",className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[i.jsx(c,{title:"Active Connections",value:(0,d.uf)(a?.activeConnections),description:`Pool Size: ${(0,d.uf)(a?.poolSize)}`,loading:s}),i.jsx(c,{title:"Waiting Connections",value:(0,d.uf)(a?.waitingConnections),loading:s})]}),i.jsx(f,{title:"Slow Queries",columns:[{key:"query",title:"Query"},{key:"duration",title:"Duration",format:d.LU},{key:"timestamp",title:"Timestamp",format:d.p6}],data:a?.slowQueries||[],loading:s})]}),(0,i.jsxs)(n.nU,{value:"cache",className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[i.jsx(c,{title:"Hit Rate",value:`${(0,d.uf)(o?.hitRate)}%`,loading:u}),i.jsx(c,{title:"Cache Size",value:(0,d.td)(o?.size),loading:u}),i.jsx(c,{title:"Evictions",value:(0,d.uf)(o?.evictions),loading:u})]}),i.jsx(f,{title:"Cache Keys",columns:[{key:"key",title:"Key"},{key:"hits",title:"Hits",format:d.uf},{key:"misses",title:"Misses",format:d.uf},{key:"size",title:"Size",format:d.td}],data:o?.byKey||[],loading:u})]}),(0,i.jsxs)(n.nU,{value:"search",className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[i.jsx(c,{title:"Average Latency",value:(0,d.LU)(m?.averageLatency),loading:x}),i.jsx(c,{title:"Query Volume",value:`${(0,d.uf)(m?.queryVolume)}/s`,loading:x}),i.jsx(c,{title:"Index Size",value:(0,d.td)(m?.indexSize),loading:x})]}),i.jsx(f,{title:"Query Stats",columns:[{key:"type",title:"Query Type"},{key:"count",title:"Count",format:d.uf},{key:"avgLatency",title:"Avg Latency",format:d.LU}],data:m?.queryStats||[],loading:x})]})]})})}a(17577)},26013:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(68570).createProxy)(String.raw`/Users/ivanpeychev/Projects/MindburnLabs/justmaily/apps/maily-web/app/monitoring/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[9774,632,110,781,8057,4991,641,928,688,6865,2385,7665,935,9797,7807,5383,9497,8873],()=>a(74575));module.exports=s})();
"use strict";(()=>{var t={};t.id=853,t.ids=[853],t.modules={399:t=>{t.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:t=>{t.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1870:(t,r,e)=>{e.r(r),e.d(r,{originalPathname:()=>b,patchFetch:()=>f,requestAsyncStorage:()=>_,routeModule:()=>w,serverHooks:()=>g,staticGenerationAsyncStorage:()=>h});var o={};e.r(o),e.d(o,{GET:()=>d});var n=e(9303),a=e(8716),i=e(670);(function(){var t=Error("Cannot find module '@/lib/api'");throw t.code="MODULE_NOT_FOUND",t})(),function(){var t=Error("Cannot find module '@/lib/monitoring'");throw t.code="MODULE_NOT_FOUND",t}(),function(){var t=Error("Cannot find module '@/lib/security'");throw t.code="MODULE_NOT_FOUND",t}(),function(){var t=Error("Cannot find module '@/lib/db'");throw t.code="MODULE_NOT_FOUND",t}();let c=Object(function(){var t=Error("Cannot find module '@/lib/monitoring'");throw t.code="MODULE_NOT_FOUND",t}())();Object(function(){var t=Error("Cannot find module '@/lib/security'");throw t.code="MODULE_NOT_FOUND",t}())();let d=Object(function(){var t=Error("Cannot find module '@/lib/api'");throw t.code="MODULE_NOT_FOUND",t}())({handler:async t=>{let{searchParams:r}=new URL(t.url);switch(r.get("type")){case"api":return await u();case"db":return await s();case"cache":return await l();case"search":return await m();default:return await O()}}});async function u(){let t=Date.now();try{let r=await c.getSystemHealth(),e=await c.getErrorRate("5m"),o=await c.getResponseTimeHistory("1h"),n=await c.getRequestRate("5m"),a=await c.getEndpointMetrics(),i=await c.getRateLimitingMetrics("1h"),d=await c.getRequestVolume("1h");return c.recordLatency("monitoring_api_metrics",Date.now()-t),{systemHealth:r,errorRate:e,responseTimeHistory:o,requestRate:n,endpointMetrics:a,rateLimiting:i,requestVolume:d}}catch(t){throw c.recordError("monitoring_api_metrics_error",t.message),t}}async function s(){let t=Date.now();try{let r=await Object(function(){var t=Error("Cannot find module '@/lib/db'");throw t.code="MODULE_NOT_FOUND",t}()).getSlowQueries(),e=await Object(function(){var t=Error("Cannot find module '@/lib/db'");throw t.code="MODULE_NOT_FOUND",t}()).getConnectionPoolStats("1h"),o=await Object(function(){var t=Error("Cannot find module '@/lib/db'");throw t.code="MODULE_NOT_FOUND",t}()).getTransactionMetrics("1h");return c.recordLatency("monitoring_db_metrics",Date.now()-t),{slowQueries:r,connectionPool:e,transactions:o}}catch(t){throw c.recordError("monitoring_db_metrics_error",t.message),t}}async function l(){let t=Date.now();try{let r=await Object(function(){var t=Error("Cannot find module '@/lib/db'");throw t.code="MODULE_NOT_FOUND",t}()).getHitRate("1h"),e=await Object(function(){var t=Error("Cannot find module '@/lib/db'");throw t.code="MODULE_NOT_FOUND",t}()).getMemoryUsage("1h"),o=await Object(function(){var t=Error("Cannot find module '@/lib/db'");throw t.code="MODULE_NOT_FOUND",t}()).getEvictionStats("1h");return c.recordLatency("monitoring_cache_metrics",Date.now()-t),{hitRate:r,memoryUsage:e,evictions:o}}catch(t){throw c.recordError("monitoring_cache_metrics_error",t.message),t}}async function m(){let t=Date.now();try{let r=await Object(function(){var t=Error("Cannot find module '@/lib/db'");throw t.code="MODULE_NOT_FOUND",t}()).getLatencyMetrics("1h"),e=await Object(function(){var t=Error("Cannot find module '@/lib/db'");throw t.code="MODULE_NOT_FOUND",t}()).getQueryVolume("1h"),o=await Object(function(){var t=Error("Cannot find module '@/lib/db'");throw t.code="MODULE_NOT_FOUND",t}()).getIndexStats();return c.recordLatency("monitoring_search_metrics",Date.now()-t),{latency:r,queryVolume:e,indexStats:o}}catch(t){throw c.recordError("monitoring_search_metrics_error",t.message),t}}async function O(){let t=Date.now();try{let[r,e,o,n]=await Promise.all([u(),s(),l(),m()]);return c.recordLatency("monitoring_all_metrics",Date.now()-t),{api:r,db:e,cache:o,search:n}}catch(t){throw c.recordError("monitoring_all_metrics_error",t.message),t}}let w=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/monitoring/route",pathname:"/api/monitoring",filename:"route",bundlePath:"app/api/monitoring/route"},resolvedPagePath:"/Users/ivanpeychev/Projects/MindburnLabs/justmaily/apps/maily-web/app/api/monitoring/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:_,staticGenerationAsyncStorage:h,serverHooks:g}=w,b="/api/monitoring/route";function f(){return(0,i.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:h})}},9303:(t,r,e)=>{t.exports=e(517)}};var r=require("../../../webpack-runtime.js");r.C(t);var e=t=>r(r.s=t),o=r.X(0,[254,781,57,991,641,928,688,865,297],()=>e(1870));module.exports=o})();
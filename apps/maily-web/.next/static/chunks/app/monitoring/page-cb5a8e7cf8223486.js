(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5738],{7999:function(e,t,a){Promise.resolve().then(a.bind(a,67200))},67200:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return k}});var i={};a.r(i);var s=a(57437),l=a(71632),n=a(2980),r=a(63405),d=a(66070),o=a(94508);function c(e){let{title:t,value:a,description:i,trend:l,className:n,loading:r=!1}=e;return(0,s.jsxs)(d.Card,{className:(0,o.cn)("overflow-hidden",n),children:[(0,s.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(d.CardTitle,{className:"text-sm font-medium",children:t}),void 0!==l&&(0,s.jsxs)("span",{className:(0,o.cn)("text-xs font-medium",l>0?"text-green-600":l<0?"text-red-600":"text-gray-600"),children:[l>0?"+":"",l,"%"]})]}),(0,s.jsx)(d.CardContent,{children:r?(0,s.jsx)("div",{className:"h-9 w-full animate-pulse rounded bg-gray-200"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:a}),i&&(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:i})]})})]})}var u=a(47625),x=a(5481),m=a(97059),h=a(62994),y=a(34788),v=a(23263),j=a(77031),f=a(6987);function g(e){let{title:t,data:a,type:i="area",dataKey:l,xAxisKey:n="timestamp",className:r,loading:c=!1,height:g=350,color:p="#0ea5e9"}=e;return(0,s.jsxs)(d.Card,{className:(0,o.cn)("overflow-hidden",r),children:[(0,s.jsx)(d.CardHeader,{children:(0,s.jsx)(d.CardTitle,{className:"text-sm font-medium",children:t})}),(0,s.jsx)(d.CardContent,{children:c?(0,s.jsx)("div",{className:"w-full animate-pulse rounded bg-gray-200",style:{height:"".concat(g,"px")}}):(0,s.jsx)(u.h,{width:"100%",height:g,children:"area"===i?(0,s.jsxs)(x.T,{data:a,children:[(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:"gradient-".concat(t),x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,s.jsx)("stop",{offset:"5%",stopColor:p,stopOpacity:.8}),(0,s.jsx)("stop",{offset:"95%",stopColor:p,stopOpacity:0})]})}),(0,s.jsx)(m.K,{dataKey:n,stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1}),(0,s.jsx)(h.B,{stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:e=>"".concat(e)}),(0,s.jsx)(y.u,{}),(0,s.jsx)(v.u,{type:"monotone",dataKey:l,stroke:p,fillOpacity:1,fill:"url(#gradient-".concat(t,")")})]}):(0,s.jsxs)(j.v,{data:a,children:[(0,s.jsx)(m.K,{dataKey:n,stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1}),(0,s.jsx)(h.B,{stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:e=>"".concat(e)}),(0,s.jsx)(y.u,{}),(0,s.jsx)(f.$,{dataKey:l,fill:p,radius:[4,4,0,0]})]})})})]})}function p(e){let{title:t,columns:a,data:l,className:n,loading:r=!1}=e;return(0,s.jsxs)(d.Card,{className:(0,o.cn)("overflow-hidden",n),children:[(0,s.jsx)(d.CardHeader,{children:(0,s.jsx)(d.CardTitle,{className:"text-sm font-medium",children:t})}),(0,s.jsx)(d.CardContent,{children:r?(0,s.jsx)("div",{className:"space-y-2",children:Array.from({length:5}).map((e,t)=>(0,s.jsx)("div",{className:"h-8 w-full animate-pulse rounded bg-gray-200"},t))}):(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsxs)(i.Table,{children:[(0,s.jsx)(i.TableHeader,{children:(0,s.jsx)(i.TableRow,{children:a.map(e=>(0,s.jsx)(i.TableHead,{children:e.title},e.key))})}),(0,s.jsx)(i.TableBody,{children:l.map((e,t)=>(0,s.jsx)(i.TableRow,{children:a.map(t=>(0,s.jsx)(i.TableCell,{children:t.format?t.format(e[t.key]):e[t.key]},t.key))},t))})]})})})]})}function k(){let{data:e,isLoading:t}=(0,l.useQuery)({queryKey:["metrics","api"],queryFn:()=>r.h.monitoring.getApiMetrics(),refetchInterval:3e4}),{data:a,isLoading:i}=(0,l.useQuery)({queryKey:["metrics","db"],queryFn:()=>r.h.monitoring.getDbMetrics(),refetchInterval:3e4}),{data:d,isLoading:u}=(0,l.useQuery)({queryKey:["metrics","cache"],queryFn:()=>r.h.monitoring.getCacheMetrics(),refetchInterval:3e4}),{data:x,isLoading:m}=(0,l.useQuery)({queryKey:["metrics","search"],queryFn:()=>r.h.monitoring.getSearchMetrics(),refetchInterval:3e4});return(0,s.jsx)("div",{className:"container mx-auto py-10",children:(0,s.jsxs)(n.mQ,{defaultValue:"overview",className:"space-y-6",children:[(0,s.jsxs)(n.dr,{children:[(0,s.jsx)(n.SP,{value:"overview",children:"Overview"}),(0,s.jsx)(n.SP,{value:"api",children:"API"}),(0,s.jsx)(n.SP,{value:"database",children:"Database"}),(0,s.jsx)(n.SP,{value:"cache",children:"Cache"}),(0,s.jsx)(n.SP,{value:"search",children:"Search"})]}),(0,s.jsxs)(n.nU,{value:"overview",className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,s.jsx)(c,{title:"System Status",value:(null==e?void 0:e.system.healthy)?"Healthy":"Unhealthy",description:"Uptime: ".concat((0,o.LU)(null==e?void 0:e.system.uptime)),loading:t}),(0,s.jsx)(c,{title:"Error Rate",value:"".concat((0,o.uf)(null==e?void 0:e.errors.rate),"%"),trend:-2.5,loading:t}),(0,s.jsx)(c,{title:"Avg Response Time",value:(0,o.LU)(null==e?void 0:e.responseTime.average),trend:1.8,loading:t}),(0,s.jsx)(c,{title:"Request Rate",value:"".concat((0,o.uf)(null==e?void 0:e.requests.rate),"/s"),trend:5.2,loading:t})]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsx)(g,{title:"Response Time Distribution",data:(null==e?void 0:e.responseTime.distribution)||[],type:"bar",dataKey:"count",xAxisKey:"bucket",loading:t}),(0,s.jsx)(g,{title:"Error Rate Trend",data:(null==e?void 0:e.errors.trend)||[],dataKey:"count",loading:t,color:"#ef4444"})]})]}),(0,s.jsx)(n.nU,{value:"api",className:"space-y-6",children:(0,s.jsx)(p,{title:"Endpoint Performance",columns:[{key:"endpoint",title:"Endpoint"},{key:"count",title:"Requests",format:o.uf},{key:"avgResponseTime",title:"Avg Response Time",format:o.LU},{key:"errorRate",title:"Error Rate",format:e=>"".concat((0,o.uf)(e),"%")}],data:(null==e?void 0:e.requests.byEndpoint)||[],loading:t})}),(0,s.jsxs)(n.nU,{value:"database",className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,s.jsx)(c,{title:"Active Connections",value:(0,o.uf)(null==a?void 0:a.activeConnections),description:"Pool Size: ".concat((0,o.uf)(null==a?void 0:a.poolSize)),loading:i}),(0,s.jsx)(c,{title:"Waiting Connections",value:(0,o.uf)(null==a?void 0:a.waitingConnections),loading:i})]}),(0,s.jsx)(p,{title:"Slow Queries",columns:[{key:"query",title:"Query"},{key:"duration",title:"Duration",format:o.LU},{key:"timestamp",title:"Timestamp",format:o.p6}],data:(null==a?void 0:a.slowQueries)||[],loading:i})]}),(0,s.jsxs)(n.nU,{value:"cache",className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,s.jsx)(c,{title:"Hit Rate",value:"".concat((0,o.uf)(null==d?void 0:d.hitRate),"%"),loading:u}),(0,s.jsx)(c,{title:"Cache Size",value:(0,o.td)(null==d?void 0:d.size),loading:u}),(0,s.jsx)(c,{title:"Evictions",value:(0,o.uf)(null==d?void 0:d.evictions),loading:u})]}),(0,s.jsx)(p,{title:"Cache Keys",columns:[{key:"key",title:"Key"},{key:"hits",title:"Hits",format:o.uf},{key:"misses",title:"Misses",format:o.uf},{key:"size",title:"Size",format:o.td}],data:(null==d?void 0:d.byKey)||[],loading:u})]}),(0,s.jsxs)(n.nU,{value:"search",className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,s.jsx)(c,{title:"Average Latency",value:(0,o.LU)(null==x?void 0:x.averageLatency),loading:m}),(0,s.jsx)(c,{title:"Query Volume",value:"".concat((0,o.uf)(null==x?void 0:x.queryVolume),"/s"),loading:m}),(0,s.jsx)(c,{title:"Index Size",value:(0,o.td)(null==x?void 0:x.indexSize),loading:m})]}),(0,s.jsx)(p,{title:"Query Stats",columns:[{key:"type",title:"Query Type"},{key:"count",title:"Count",format:o.uf},{key:"avgLatency",title:"Avg Latency",format:o.LU}],data:(null==x?void 0:x.queryStats)||[],loading:m})]})]})})}a(2265)}},function(e){e.O(0,[9774,632,7842,2385,7901,4712,5397,1688,8728,4714,2943,5148,8487,1523,1744],function(){return e(e.s=7999)}),_N_E=e.O()}]);
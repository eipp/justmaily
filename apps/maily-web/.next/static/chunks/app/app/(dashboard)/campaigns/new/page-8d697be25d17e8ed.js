(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9632],{33669:function(e,r,s){Promise.resolve().then(s.bind(s,9209))},9209:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return S}});var l=s(57437),i=s(99376),a=s(64250),t=s(31229),n=s(14459),d=s(36572),c=s(44022),o=s(7107);s(2265);let u=e=>(0,l.jsx)("select",{...e}),m=e=>(0,l.jsx)("button",{...e,children:"Select"}),h=()=>(0,l.jsx)("span",{children:"Select value"}),x=e=>{let{children:r}=e;return(0,l.jsx)("div",{children:r})},j=e=>{let{children:r}=e;return(0,l.jsx)("div",{children:r})};var v=s(2581),g=s(63405),p=s(99682);let b=e=>{let{value:r="",onChange:s}=e;return(0,l.jsx)("textarea",{value:r,onChange:e=>s&&s(e.target.value),style:{width:"100%",height:"200px",padding:"0.5rem",border:"1px solid #ddd",borderRadius:"0.25rem"}})},f=t.z.object({name:t.z.string().min(1,"Name is required"),subject:t.z.string().min(1,"Subject is required"),fromName:t.z.string().min(1,"From name is required"),fromEmail:t.z.string().email("Invalid email address"),replyTo:t.z.string().email("Invalid email address"),content:t.z.object({html:t.z.string().min(1,"Content is required"),text:t.z.string()}),list:t.z.string().min(1,"List is required"),schedule:t.z.enum(["now","later"]),scheduledFor:t.z.string().optional()});function S(){let e=(0,i.useRouter)(),{mutate:r,isLoading:s}=(0,a.useMutation)({mutationFn:e=>g.h.campaigns.create(e),onSuccess:()=>{(0,p.A)({title:"Success",description:"Campaign has been created."}),e.push("/campaigns")},onError:()=>{(0,p.A)({title:"Error",description:"Failed to create campaign.",variant:"destructive"})}});return(0,l.jsx)(n.MainLayout,{children:(0,l.jsxs)("div",{className:"flex-1 space-y-4 p-8 pt-6",children:[(0,l.jsx)("div",{className:"flex items-center justify-between space-y-2",children:(0,l.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Create Campaign"})}),(0,l.jsx)("div",{className:"space-y-4",children:(0,l.jsx)(d.l,{schema:f,onSubmit:e=>r(e),defaultValues:{schedule:"now",content:{html:"",text:""}},children:r=>{var i,a,t,n,d,g,p;return(0,l.jsxs)("div",{className:"space-y-8",children:[(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("div",{children:(0,l.jsx)(o.I,{label:"Campaign Name",placeholder:"Enter campaign name",error:null===(i=r.formState.errors.name)||void 0===i?void 0:i.message,...r.register("name")})}),(0,l.jsx)("div",{children:(0,l.jsx)(o.I,{label:"Subject Line",placeholder:"Enter subject line",error:null===(a=r.formState.errors.subject)||void 0===a?void 0:a.message,...r.register("subject")})}),(0,l.jsx)("div",{children:(0,l.jsx)(o.I,{label:"From Name",placeholder:"Enter from name",error:null===(t=r.formState.errors.fromName)||void 0===t?void 0:t.message,...r.register("fromName")})}),(0,l.jsx)("div",{children:(0,l.jsx)(o.I,{label:"From Email",placeholder:"Enter from email",error:null===(n=r.formState.errors.fromEmail)||void 0===n?void 0:n.message,...r.register("fromEmail")})}),(0,l.jsx)("div",{children:(0,l.jsx)(o.I,{label:"Reply-To Email",placeholder:"Enter reply-to email",error:null===(d=r.formState.errors.replyTo)||void 0===d?void 0:d.message,...r.register("replyTo")})}),(0,l.jsx)("div",{children:(0,l.jsxs)(u,{label:"Subscriber List",error:null===(g=r.formState.errors.list)||void 0===g?void 0:g.message,onValueChange:e=>r.setValue("list",e),children:[(0,l.jsx)(m,{children:(0,l.jsx)(h,{placeholder:"Select a list"})}),(0,l.jsxs)(x,{children:[(0,l.jsx)(j,{value:"all",children:"All Subscribers"}),(0,l.jsx)(j,{value:"active",children:"Active Subscribers"}),(0,l.jsx)(j,{value:"inactive",children:"Inactive Subscribers"})]})]})}),(0,l.jsx)("div",{children:(0,l.jsxs)(u,{label:"Schedule",onValueChange:e=>r.setValue("schedule",e),defaultValue:"now",children:[(0,l.jsx)(m,{children:(0,l.jsx)(h,{})}),(0,l.jsxs)(x,{children:[(0,l.jsx)(j,{value:"now",children:"Send Now"}),(0,l.jsx)(j,{value:"later",children:"Schedule"})]})]})}),"later"===r.watch("schedule")&&(0,l.jsx)("div",{children:(0,l.jsx)(o.I,{type:"datetime-local",label:"Schedule Date",error:null===(p=r.formState.errors.scheduledFor)||void 0===p?void 0:p.message,...r.register("scheduledFor")})})]}),(0,l.jsx)("div",{className:"space-y-4",children:(0,l.jsxs)(v.Tabs,{defaultValue:"design",children:[(0,l.jsxs)(v.TabsList,{children:[(0,l.jsx)(v.TabsTrigger,{value:"design",children:"Design"}),(0,l.jsx)(v.TabsTrigger,{value:"code",children:"Code"}),(0,l.jsx)(v.TabsTrigger,{value:"preview",children:"Preview"})]}),(0,l.jsx)(v.TabsContent,{value:"design",children:(0,l.jsx)(b,{value:r.watch("content.html"),onChange:e=>r.setValue("content.html",e)})}),(0,l.jsx)(v.TabsContent,{value:"code",children:(0,l.jsx)("textarea",{className:"w-full h-[500px] font-mono p-4",value:r.watch("content.html"),onChange:e=>r.setValue("content.html",e.target.value)})}),(0,l.jsx)(v.TabsContent,{value:"preview",children:(0,l.jsx)("div",{className:"w-full h-[500px] border p-4",dangerouslySetInnerHTML:{__html:r.watch("content.html")}})})]})})]}),(0,l.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,l.jsx)(c.z,{variant:"outline",onClick:()=>e.push("/campaigns"),children:"Cancel"}),(0,l.jsx)(c.z,{type:"submit",disabled:s,loading:s,children:"Create Campaign"})]})]})}})})]})})}}},function(e){e.O(0,[632,7842,2385,4714,2943,5148,8487,1523,1744],function(){return e(e.s=33669)}),_N_E=e.O()}]);
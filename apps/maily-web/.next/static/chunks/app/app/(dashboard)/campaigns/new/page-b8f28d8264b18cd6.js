(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9632],{33669:function(e,r,l){Promise.resolve().then(l.bind(l,9209))},9209:function(e,r,l){"use strict";l.r(r),l.d(r,{default:function(){return g}});var s={};l.r(s);var t={};l.r(t);var a=l(57437),i=l(99376),n=l(64250),c=l(31229),d=l(14459),o=l(36572),m=l(44022),u=l(7107);l(2265);var h=l(2581),v=l(63405),x=l(99682);let j=c.z.object({name:c.z.string().min(1,"Name is required"),subject:c.z.string().min(1,"Subject is required"),fromName:c.z.string().min(1,"From name is required"),fromEmail:c.z.string().email("Invalid email address"),replyTo:c.z.string().email("Invalid email address"),content:c.z.object({html:c.z.string().min(1,"Content is required"),text:c.z.string()}),list:c.z.string().min(1,"List is required"),schedule:c.z.enum(["now","later"]),scheduledFor:c.z.string().optional()});function g(){let e=(0,i.useRouter)(),{mutate:r,isLoading:l}=(0,n.useMutation)({mutationFn:e=>v.h.campaigns.create(e),onSuccess:()=>{(0,x.A)({title:"Success",description:"Campaign has been created."}),e.push("/campaigns")},onError:()=>{(0,x.A)({title:"Error",description:"Failed to create campaign.",variant:"destructive"})}});return(0,a.jsx)(d.MainLayout,{children:(0,a.jsxs)("div",{className:"flex-1 space-y-4 p-8 pt-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between space-y-2",children:(0,a.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Create Campaign"})}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsx)(o.l,{schema:j,onSubmit:e=>r(e),defaultValues:{schedule:"now",content:{html:"",text:""}},children:r=>{var i,n,c,d,o,v,x;return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{children:(0,a.jsx)(u.I,{label:"Campaign Name",placeholder:"Enter campaign name",error:null===(i=r.formState.errors.name)||void 0===i?void 0:i.message,...r.register("name")})}),(0,a.jsx)("div",{children:(0,a.jsx)(u.I,{label:"Subject Line",placeholder:"Enter subject line",error:null===(n=r.formState.errors.subject)||void 0===n?void 0:n.message,...r.register("subject")})}),(0,a.jsx)("div",{children:(0,a.jsx)(u.I,{label:"From Name",placeholder:"Enter from name",error:null===(c=r.formState.errors.fromName)||void 0===c?void 0:c.message,...r.register("fromName")})}),(0,a.jsx)("div",{children:(0,a.jsx)(u.I,{label:"From Email",placeholder:"Enter from email",error:null===(d=r.formState.errors.fromEmail)||void 0===d?void 0:d.message,...r.register("fromEmail")})}),(0,a.jsx)("div",{children:(0,a.jsx)(u.I,{label:"Reply-To Email",placeholder:"Enter reply-to email",error:null===(o=r.formState.errors.replyTo)||void 0===o?void 0:o.message,...r.register("replyTo")})}),(0,a.jsx)("div",{children:(0,a.jsxs)(s.Select,{label:"Subscriber List",error:null===(v=r.formState.errors.list)||void 0===v?void 0:v.message,onValueChange:e=>r.setValue("list",e),children:[(0,a.jsx)(s.SelectTrigger,{children:(0,a.jsx)(s.SelectValue,{placeholder:"Select a list"})}),(0,a.jsxs)(s.SelectContent,{children:[(0,a.jsx)(s.SelectItem,{value:"all",children:"All Subscribers"}),(0,a.jsx)(s.SelectItem,{value:"active",children:"Active Subscribers"}),(0,a.jsx)(s.SelectItem,{value:"inactive",children:"Inactive Subscribers"})]})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)(s.Select,{label:"Schedule",onValueChange:e=>r.setValue("schedule",e),defaultValue:"now",children:[(0,a.jsx)(s.SelectTrigger,{children:(0,a.jsx)(s.SelectValue,{})}),(0,a.jsxs)(s.SelectContent,{children:[(0,a.jsx)(s.SelectItem,{value:"now",children:"Send Now"}),(0,a.jsx)(s.SelectItem,{value:"later",children:"Schedule"})]})]})}),"later"===r.watch("schedule")&&(0,a.jsx)("div",{children:(0,a.jsx)(u.I,{type:"datetime-local",label:"Schedule Date",error:null===(x=r.formState.errors.scheduledFor)||void 0===x?void 0:x.message,...r.register("scheduledFor")})})]}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)(h.Tabs,{defaultValue:"design",children:[(0,a.jsxs)(h.TabsList,{children:[(0,a.jsx)(h.TabsTrigger,{value:"design",children:"Design"}),(0,a.jsx)(h.TabsTrigger,{value:"code",children:"Code"}),(0,a.jsx)(h.TabsTrigger,{value:"preview",children:"Preview"})]}),(0,a.jsx)(h.TabsContent,{value:"design",children:(0,a.jsx)(t.Editor,{value:r.watch("content.html"),onChange:e=>r.setValue("content.html",e)})}),(0,a.jsx)(h.TabsContent,{value:"code",children:(0,a.jsx)("textarea",{className:"w-full h-[500px] font-mono p-4",value:r.watch("content.html"),onChange:e=>r.setValue("content.html",e.target.value)})}),(0,a.jsx)(h.TabsContent,{value:"preview",children:(0,a.jsx)("div",{className:"w-full h-[500px] border p-4",dangerouslySetInnerHTML:{__html:r.watch("content.html")}})})]})})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,a.jsx)(m.z,{variant:"outline",onClick:()=>e.push("/campaigns"),children:"Cancel"}),(0,a.jsx)(m.z,{type:"submit",disabled:l,loading:l,children:"Create Campaign"})]})]})}})})]})})}}},function(e){e.O(0,[632,7842,2385,4714,2943,5148,8487,1523,1744],function(){return e(e.s=33669)}),_N_E=e.O()}]);
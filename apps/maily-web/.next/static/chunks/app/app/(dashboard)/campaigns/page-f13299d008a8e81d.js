(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[307],{47733:function(e,t,a){Promise.resolve().then(a.bind(a,13289))},13289:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return j}});var l={};a.r(l);var s=a(57437),c=a(71632),n=a(14459),i=a(63405),r=a(92553),d=a(44022),u=a(99376),o=a(54506),h=a(94608);a(2265);var g=a(11703),m=a(56266),x=a(99682);let p=[{id:"select",header:e=>{let{table:t}=e;return(0,s.jsx)(l.Checkbox,{checked:t.getIsAllPageRowsSelected(),onCheckedChange:e=>t.toggleAllPageRowsSelected(!!e),"aria-label":"Select all"})},cell:e=>{let{row:t}=e;return(0,s.jsx)(l.Checkbox,{checked:t.getIsSelected(),onCheckedChange:e=>t.toggleSelected(!!e),"aria-label":"Select row"})},enableSorting:!1,enableHiding:!1},{accessorKey:"name",header:"Name"},{accessorKey:"subject",header:"Subject"},{accessorKey:"status",header:"Status",cell:e=>{let{row:t}=e,a=t.getValue("status");return(0,s.jsx)(h.C,{variant:"sent"===a?"success":"failed"===a?"destructive":"secondary",children:a})}},{accessorKey:"sentAt",header:"Sent",cell:e=>{let{row:t}=e,a=t.getValue("sentAt");return a?(0,o.Z)(new Date(a),{addSuffix:!0}):"-"}},{accessorKey:"scheduledFor",header:"Scheduled For",cell:e=>{let{row:t}=e,a=t.getValue("scheduledFor");return a?(0,o.Z)(new Date(a),{addSuffix:!0}):"-"}},{accessorKey:"openRate",header:"Open Rate",cell:e=>{let{row:t}=e,a=t.getValue("openRate");return a?"".concat(a.toFixed(1),"%"):"-"}},{accessorKey:"clickRate",header:"Click Rate",cell:e=>{let{row:t}=e,a=t.getValue("clickRate");return a?"".concat(a.toFixed(1),"%"):"-"}},{id:"actions",cell:e=>{let{row:t}=e,a=t.original;return(0,s.jsxs)(g.h_,{children:[(0,s.jsx)(g.$F,{asChild:!0,children:(0,s.jsxs)(d.z,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,s.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,s.jsx)(m.Z,{className:"h-4 w-4"})]})}),(0,s.jsxs)(g.AW,{align:"end",children:[(0,s.jsx)(g.Ju,{children:"Actions"}),(0,s.jsx)(g.Xi,{onClick:()=>navigator.clipboard.writeText(a.id),children:"Copy campaign ID"}),(0,s.jsx)(g.VD,{}),(0,s.jsx)(g.Xi,{children:"View details"}),(0,s.jsx)(g.Xi,{children:"View analytics"}),"draft"===a.status&&(0,s.jsx)(g.Xi,{children:"Edit campaign"}),(0,s.jsx)(g.Xi,{className:"text-destructive",children:"Delete campaign"})]})]})}}];function j(){let e=(0,u.useRouter)(),{data:t,isLoading:a}=(0,c.useQuery)({queryKey:["campaigns"],queryFn:()=>i.h.campaigns.list()}),l=async e=>{try{await Promise.all(e.map(e=>i.h.campaigns.delete(e))),(0,x.A)({title:"Success",description:"Selected campaigns have been deleted."})}catch(e){(0,x.A)({title:"Error",description:"Failed to delete selected campaigns.",variant:"destructive"})}};return(0,s.jsx)(n.MainLayout,{children:(0,s.jsxs)("div",{className:"flex-1 space-y-4 p-8 pt-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between space-y-2",children:[(0,s.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Campaigns"}),(0,s.jsx)("div",{className:"flex items-center space-x-2",children:(0,s.jsx)(d.z,{onClick:()=>e.push("/campaigns/new"),children:"Create Campaign"})})]}),(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsx)(r.w,{columns:p,data:(null==t?void 0:t.items)||[],searchableColumns:[{id:"name",title:"Name"},{id:"subject",title:"Subject"}],filterableColumns:[{id:"status",title:"Status",options:[{label:"Draft",value:"draft"},{label:"Scheduled",value:"scheduled"},{label:"Sending",value:"sending"},{label:"Sent",value:"sent"},{label:"Failed",value:"failed"}]}],deleteRowsAction:e=>{var t;l(Object.keys((null===(t=e.currentTarget.form)||void 0===t?void 0:t.elements)||{}).filter(t=>{var a,l;return t.startsWith("row-select-")&&(null===(l=e.currentTarget.form)||void 0===l?void 0:null===(a=l.elements[t])||void 0===a?void 0:a.checked)}))}})})]})})}}},function(e){e.O(0,[632,7842,2385,4714,2943,5148,8487,1523,1744],function(){return e(e.s=47733)}),_N_E=e.O()}]);
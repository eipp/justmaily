(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3446],{74715:function(e,s,a){Promise.resolve().then(a.bind(a,7180))},7180:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return y}});var t=a(57437),l=a(2265),r=a(99376),n=a(62869),i=a(2980),d=a(66070),c=a(63639),x=a(89345),m=a(39763);let o=(0,m.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);var h=a(95805),j=a(28921);let u=(0,m.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);function y(e){let{params:s}=e,a=(0,r.useRouter)(),{supabase:m,user:y}=useSupabase(),[g,p]=(0,l.useState)(!0),[f,v]=(0,l.useState)(null),[N,b]=(0,l.useState)(null),[C,w]=(0,l.useState)("7d");(0,l.useEffect)(()=>{k()},[s.id,C]);let k=async()=>{p(!0),v(null);try{let{data:e,error:t}=await m.from("projects").select("owner_id, settings").eq("id",s.id).single();if(t)throw t;if(e.owner_id!==(null==y?void 0:y.id)){a.push("/dashboard");return}if(!e.settings.enableAnalytics){v("Analytics are not enabled for this project"),p(!1);return}let l=await T(s.id,C);b(l)}catch(e){v("Failed to load analytics data")}finally{p(!1)}},T=async(e,s)=>({overview:{totalEmails:15e3,deliveryRate:98.5,openRate:45.2,clickRate:12.8,bounceRate:1.5},engagement:{dailyOpens:[{date:"2024-01-01",count:250},{date:"2024-01-02",count:300}],dailyClicks:[{date:"2024-01-01",count:75},{date:"2024-01-02",count:90}],topLinks:[{url:"https://example.com/product",clicks:450},{url:"https://example.com/pricing",clicks:320}]},deliverability:{bounces:[{type:"hard",count:150},{type:"soft",count:75}],complaints:25,blocks:50},timing:{bestSendTimes:[{hour:9,engagementRate:25.5},{hour:14,engagementRate:22.8}],bestDays:[{day:"Tuesday",engagementRate:24.5},{day:"Wednesday",engagementRate:23.2}]}});return g?(0,t.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-blue-600 border-t-transparent"}),(0,t.jsx)("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Loading analytics..."})]})}):f?(0,t.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-red-100 dark:bg-red-900",children:(0,t.jsx)(c.Z,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),(0,t.jsx)("p",{className:"mt-2 text-lg font-medium text-gray-900 dark:text-gray-100",children:f})]})}):N?(0,t.jsx)("div",{className:"container mx-auto py-8",children:(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Project Analytics"}),(0,t.jsx)("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Track your project's performance and engagement metrics"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("select",{value:C,onChange:e=>w(e.target.value),className:"rounded-md border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700",children:[(0,t.jsx)("option",{value:"7d",children:"Last 7 days"}),(0,t.jsx)("option",{value:"30d",children:"Last 30 days"}),(0,t.jsx)("option",{value:"90d",children:"Last 90 days"}),(0,t.jsx)("option",{value:"1y",children:"Last year"})]}),(0,t.jsx)(n.Button,{onClick:k,children:"Refresh"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[(0,t.jsxs)(d.Card,{children:[(0,t.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(d.CardTitle,{className:"text-sm font-medium",children:"Total Emails"}),(0,t.jsx)(x.Z,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})]}),(0,t.jsxs)(d.CardContent,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:N.overview.totalEmails.toLocaleString()}),(0,t.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Sent during selected period"})]})]}),(0,t.jsxs)(d.Card,{children:[(0,t.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(d.CardTitle,{className:"text-sm font-medium",children:"Delivery Rate"}),(0,t.jsx)(o,{className:"h-4 w-4 text-green-600"})]}),(0,t.jsxs)(d.CardContent,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[N.overview.deliveryRate,"%"]}),(0,t.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Successfully delivered"})]})]}),(0,t.jsxs)(d.Card,{children:[(0,t.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(d.CardTitle,{className:"text-sm font-medium",children:"Open Rate"}),(0,t.jsx)(h.Z,{className:"h-4 w-4 text-blue-600"})]}),(0,t.jsxs)(d.CardContent,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[N.overview.openRate,"%"]}),(0,t.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Of delivered emails"})]})]}),(0,t.jsxs)(d.Card,{children:[(0,t.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(d.CardTitle,{className:"text-sm font-medium",children:"Click Rate"}),(0,t.jsx)(j.Z,{className:"h-4 w-4 text-purple-600"})]}),(0,t.jsxs)(d.CardContent,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[N.overview.clickRate,"%"]}),(0,t.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Of opened emails"})]})]})]}),(0,t.jsxs)(i.mQ,{defaultValue:"engagement",className:"space-y-4",children:[(0,t.jsxs)(i.dr,{children:[(0,t.jsxs)(i.SP,{value:"engagement",className:"flex items-center",children:[(0,t.jsx)(h.Z,{className:"mr-2 h-4 w-4"}),"Engagement"]}),(0,t.jsxs)(i.SP,{value:"deliverability",className:"flex items-center",children:[(0,t.jsx)(x.Z,{className:"mr-2 h-4 w-4"}),"Deliverability"]}),(0,t.jsxs)(i.SP,{value:"timing",className:"flex items-center",children:[(0,t.jsx)(u,{className:"mr-2 h-4 w-4"}),"Timing"]})]}),(0,t.jsx)(i.nU,{value:"engagement",className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsx)(d.CardTitle,{children:"Daily Opens"})}),(0,t.jsx)(d.CardContent,{children:(0,t.jsx)("div",{className:"h-[200px] w-full bg-gray-100 dark:bg-gray-800"})})]}),(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsx)(d.CardTitle,{children:"Daily Clicks"})}),(0,t.jsx)(d.CardContent,{children:(0,t.jsx)("div",{className:"h-[200px] w-full bg-gray-100 dark:bg-gray-800"})})]})]})}),(0,t.jsx)(i.nU,{value:"deliverability",className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsx)(d.CardTitle,{children:"Bounce Types"})}),(0,t.jsx)(d.CardContent,{children:(0,t.jsx)("div",{className:"space-y-4",children:N.deliverability.bounces.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("span",{className:"capitalize",children:[e.type," Bounces"]}),(0,t.jsx)("span",{className:"font-medium",children:e.count})]},e.type))})})]}),(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsx)(d.CardTitle,{children:"Delivery Issues"})}),(0,t.jsx)(d.CardContent,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Complaints"}),(0,t.jsx)("span",{className:"font-medium",children:N.deliverability.complaints})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Blocks"}),(0,t.jsx)("span",{className:"font-medium",children:N.deliverability.blocks})]})]})})]})]})}),(0,t.jsx)(i.nU,{value:"timing",className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsx)(d.CardTitle,{children:"Best Send Times"})}),(0,t.jsx)(d.CardContent,{children:(0,t.jsx)("div",{className:"space-y-4",children:N.timing.bestSendTimes.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("span",{children:[e.hour,":00"]}),(0,t.jsxs)("span",{className:"font-medium",children:[e.engagementRate,"% engagement"]})]},e.hour))})})]}),(0,t.jsxs)(d.Card,{children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsx)(d.CardTitle,{children:"Best Days"})}),(0,t.jsx)(d.CardContent,{children:(0,t.jsx)("div",{className:"space-y-4",children:N.timing.bestDays.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:e.day}),(0,t.jsxs)("span",{className:"font-medium",children:[e.engagementRate,"% engagement"]})]},e.day))})})]})]})})]})]})}):null}}},function(e){e.O(0,[632,7842,2385,4714,2943,5148,8487,1523,1744],function(){return e(e.s=74715)}),_N_E=e.O()}]);